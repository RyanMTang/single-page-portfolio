YUI.add("hermes-template-fluid-droparound",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" html"}function h(e,t){return" subview-droparound"}function p(e,t){return" menu"}function d(e,t){return" auto-size"}function v(e,t){var r="",i;return r+="max-height: ",(i=n.staticHeight)?i=i.call(e,{hash:{},data:t}):(i=e.staticHeight,i=typeof i===u?i.apply(e):i),r+=a(i)+"px; min-height: ",(i=n.staticHeight)?i=i.call(e,{hash:{},data:t}):(i=e.staticHeight,i=typeof i===u?i.apply(e):i),r+=a(i)+"px; ",r}function m(e,t){var r="",i;return r+="width: ",(i=n.staticWidth)?i=i.call(e,{hash:{},data:t}):(i=e.staticWidth,i=typeof i===u?i.apply(e):i),r+=a(i)+"px;",r}function g(e,t){return"position: fixed;"}function y(e,t){return"hide-head"}function b(e,t){var r="",i;r+='\n			<div class="content text-only',i=n["if"].call(e,e.autoSizeToContent,{hash:{},inverse:f.noop,fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+='">\n				',(i=n.textMessage)?i=i.call(e,{hash:{},data:t}):(i=e.textMessage,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n			</div>\n		",r}function w(e,t){var r="",i,s;r+='\n			<div class="content html-only',i=n["if"].call(e,e.autoSizeToContent,{hash:{},inverse:f.noop,fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+='">\n				',s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlMessage,s):l.call(e,"renderTrustedMarkup",e.htmlMessage,s)))+"\n			</div>\n		",r}function E(e,t){return'\n			<div class="content subview"></div>\n		'}function S(e,t){var r="",i;r+='\n			<div class="content menu">\n				<ul role="menu">\n					',i=n.each.call(e,e.menuItems,{hash:{},inverse:f.noop,fn:f.programWithDepth(24,x,t,e),data:t});if(i||i===0)r+=i;return r+="\n				</ul>\n			</div>\n		",r}function x(e,t,r){var i="",s;i+="\n					",s=n["if"].call(e,r.multiSelect,{hash:{},inverse:f.program(30,k,t),fn:f.program(25,T,t),data:t});if(s||s===0)i+=s;return i+="\n					",i}function T(e,t){var r="",i;r+='\n						<li role="menuitem" ',i=n["if"].call(e,e.selected,{hash:{},inverse:f.noop,fn:f.program(26,N,t),data:t});if(i||i===0)r+=i;r+='><span class="selection"></span>',(i=n.text)?i=i.call(e,{hash:{},data:t}):(i=e.text,i=typeof i===u?i.apply(e):i),r+=a(i)+" - ",(i=n.itemFlag)?i=i.call(e,{hash:{},data:t}):(i=e.itemFlag,i=typeof i===u?i.apply(e):i),r+=a(i),i=n["if"].call(e,e.itemFlag,{hash:{},inverse:f.noop,fn:f.program(28,C,t),data:t});if(i||i===0)r+=i;return r+="</li>\n					",r}function N(e,t){return'class="selected"'}function C(e,t){var r="",i;return r+='<div class="label-new">',(i=n.itemFlag)?i=i.call(e,{hash:{},data:t}):(i=e.itemFlag,i=typeof i===u?i.apply(e):i),r+=a(i)+"</div>",r}function k(e,t){var r="",i;r+='\n						<li role="menuitem">',i=n["if"].call(e,e.href,{hash:{},inverse:f.noop,fn:f.program(31,L,t),data:t});if(i||i===0)r+=i;(i=n.text)?i=i.call(e,{hash:{},data:t}):(i=e.text,i=typeof i===u?i.apply(e):i),r+=a(i),i=n["if"].call(e,e.itemFlag,{hash:{},inverse:f.noop,fn:f.program(28,C,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.href,{hash:{},inverse:f.noop,fn:f.program(34,O,t),data:t});if(i||i===0)r+=i;return r+="</li>\n					",r}function L(e,t){var r="",i;r+='<a href="',(i=n.href)?i=i.call(e,{hash:{},data:t}):(i=e.href,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',i=n["if"].call(e,e.className,{hash:{},inverse:f.noop,fn:f.program(32,A,t),data:t});if(i||i===0)r+=i;return r+=">",r}function A(e,t){var r="",i;return r+=' class="',(i=n.className)?i=i.call(e,{hash:{},data:t}):(i=e.className,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function O(e,t){return"</a>"}function M(e,t){return"hide-foot"}function _(e,t){return'\n		<div class="droparrow up"></div>\n	'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;s+='<div class="droparound',o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:f.noop,fn:f.program(1,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.subview,{hash:{},inverse:f.noop,fn:f.program(3,h,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.menuItems,{hash:{},inverse:f.noop,fn:f.program(5,p,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.autoSizeToContent,{hash:{},inverse:f.noop,fn:f.program(7,d,i),data:i});if(o||o===0)s+=o;s+=" ",(o=n.classList)?o=o.call(t,{hash:{},data:i}):(o=t.classList,o=typeof o===u?o.apply(t):o),s+=a(o)+'"\nstyle="',o=n["if"].call(t,t.staticHeight,{hash:{},inverse:f.noop,fn:f.program(9,v,i),data:i});if(o||o===0)s+=o;s+="\n",o=n["if"].call(t,t.staticWidth,{hash:{},inverse:f.noop,fn:f.program(11,m,i),data:i});if(o||o===0)s+=o;s+="\n",o=n["if"].call(t,t.positionFixed,{hash:{},inverse:f.noop,fn:f.program(13,g,i),data:i});if(o||o===0)s+=o;s+='">\n	<div class="head ',o=n.unless.call(t,t.headContent,{hash:{},inverse:f.noop,fn:f.program(15,y,i),data:i});if(o||o===0)s+=o;s+='">\n		',(o=n.headContent)?o=o.call(t,{hash:{},data:i}):(o=t.headContent,o=typeof o===u?o.apply(t):o),s+=a(o)+'\n	</div>\n	<div class="body">\n		',o=n["if"].call(t,t.textMessage,{hash:{},inverse:f.noop,fn:f.program(17,b,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:f.noop,fn:f.program(19,w,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.subview,{hash:{},inverse:f.noop,fn:f.program(21,E,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.menuItems,{hash:{},inverse:f.noop,fn:f.program(23,S,i),data:i});if(o||o===0)s+=o;s+='\n	</div>\n	<div class="foot ',o=n.unless.call(t,t.footContent,{hash:{},inverse:f.noop,fn:f.program(36,M,i),data:i});if(o||o===0)s+=o;s+='">\n		',(o=n.footContent)?o=o.call(t,{hash:{},data:i}):(o=t.footContent,o=typeof o===u?o.apply(t):o),s+=a(o)+"\n	</div>\n	",o=n["if"].call(t,t.showDropArrow,{hash:{},inverse:f.noop,fn:f.program(38,_,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-droparound",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",
{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-flickr-balls",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="balls">\n	<div class="blue ball"></div><div class="pink ball"></div>\n</div>'}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/flickr-balls",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-overlay-manager-view",function(e){"use strict";var t=0,n=e.Base.create("overlayManager",e.Base,[],{add:function(n){var r=this.get("overlay"),i=n.getAttrs(),s=this;this.get("modals").push(n),r?i.dismissOnOverlayClick&&this.set("dismissOnOverlayClick",!0):(r=e.Node.create(this.get("overlayHTML")),e.one("body").append(r),this.set("overlay",r),t++,this.addOverlayClickHandler(r),this.addOverlayKeyHandler(r),i.dismissOnOverlayClick?this.set("dismissOnOverlayClick",!0):this.set("dismissOnOverlayClick",!1)),this.setOverlayStyle(i),i.dismissOnActionClick&&n.on("actionClick",function(){setTimeout(function(){s.close()},0)}),n.name==="fluid-modal-view"&&n.on("cancelClick",function(){setTimeout(function(){s.close()},0)})},setOverlayStyle:function(e){var t="",n="",r="",i=this.get("overlay");e.hideModalOverlay&&(t="transparent"),e.darkOverlay&&(t="dark-overlay"),e.invisibleOverlay&&(n="invisible"),e.overlayClassList&&(r=e.overlayClassList),i.setAttribute("class",this.get("overlayClass")+" "+r+" "+t+" "+n)},addOverlayClickHandler:function(e){e.getDOMNode().addEventListener("click",this.clickHandler.bind(this))},removeOverlayClickHandler:function(e){e.getDOMNode().removeEventListener("click",this.clickHandler.bind(this))},addOverlayKeyHandler:function(t){e.one("body").getDOMNode().addEventListener("keyup",this.keyHandler.bind(this))},removeOverlayKeyHandler:function(t){e.one("body").getDOMNode().removeEventListener("keyup",this.keyHandler.bind(this))},keyHandler:function(e){e.keyCode===27&&this.clickHandler()},clickHandler:function(){var e=this.get("modals").length-2,t="",n="",r="",i,s=this.get("overlay");this.get("dismissOnOverlayClick")&&(this.set("dismissOnOverlayClick",!1),this.close(),e>-1&&this.get("modals").length>0&&(i=this.get("modals")[e].getAttrs(),i.hideModalOverlay&&(t="transparent"),i.invisibleOverlay&&(n="invisible"),i.overlayClassList&&(r=i.overlayClassList),s.setAttribute("class",this.get("overlayClass")+" "+r+" "+t+" "+n),this.set("dismissOnOverlayClick",i.dismissOnOverlayClick)))},remove:function(e){var t=this.get("modals");if(e.isClosed){var n=t.indexOf(e);n>-1?t.splice(n,1):t.length===1&&(n=0,t.splice(n,1)),this.removeOverlay()}},close:function(){var e=this.get("modals").pop();e&&!e.isClosed&&e.close(),this.removeOverlay()},closeAll:function(){var e=this;this.get("modals").forEach(function(t,n){e.close()})},removeOverlay:function(){var e=this.get("overlay");if(this.get("modals").length===0&&e)this.removeOverlayClickHandler(e),this.removeOverlayKeyHandler(e),e.remove(),this.set("overlay",undefined),t--;else{var n=this.get("modals").length-1;n>-1&&this.setOverlayStyle(this.get("modals")[n].getAttrs())}},alreadyShowingModal:function(e){var t=!1;return e||(e="fluid-modal-view"),this.get("modals").forEach(function(n,r){n.name===e&&(t=!0)}),t}},{ATTRS:{modals:{value:[],validator:function(t){return e.Lang.isArray(t)}},overlayHTML:{},overlayClass:{},overlay:{value:undefined},dismissOnOverlayClick:{value:!0,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},validator:function(t){return e.Lang.isBoolean(t)}}}});e.OverlayManager={DroparoundOverlay:new n({overlayHTML:'<div class="fluid-droparound-overlay"></div>',overlayClass:"fluid-droparound-overlay"}),ModalOverlay:new n({overlayHTML:'<div class="fluid-modal-overlay"><div class="balls"></div></div>',overlayClass:"fluid-modal-overlay"}),SignupInterstitialOverlay:new n({overlayHTML:'<div class="signup-interstitial-overlay interstitial-fade"></div>',overlayClass:"signup-interstitial-overlay interstitial-fade"}),ChalkboardOverlay:new n({overlayHTML:'<div class="fluid-chalkboard-overlay"></div>',overlayClass:"fluid-chalkboard-overlay"}),hasOverlay:function(){return t>0}}},"@VERSION@",{requires:["base","flickr-view","attribute-helpers","fluid-css","fluid-balls-css"],optional:[],langBundles:[],optionalRequires:["fluid"]});
YUI.add("fluid",function(e){"use strict";function n(){var n="",r=[];return!t.prefix&&"getComputedStyle"in e.config.win&&(r=Array.prototype.slice.call(e.config.win.getComputedStyle(e.config.doc.documentElement,"")),n=r.join("").match(/-(webkit|moz|ms)-/),n=n&&n.length>1?n[1]:"",t.prefix.raw=n.toLowerCase(),t.prefix.css="-"+n+"-",t.prefix.js=n.charAt(0).toUpperCase()+n.slice(1),t.prefix.dom="WebKit|Moz|MS".match(new RegExp("("+n+")","i"))[1]),t.prefix}function r(t,n){return n=n||e.config.win,new e.Promise(function(r,i){setTimeout(e.bind(function(){r(t.call(n))},n),1)})}function i(e,n,r){return t.prefix.css!==""?r.getDOMNode().style.setProperty(t.prefix.css+e,n,null):r.setStyle(e,n),r}function s(n){var r=!1;return n+="",r=n in e.config.doc.body.style,r||(n=n.charAt(0).toUpperCase()+n.slice(1),r=t.prefix.raw+n in e.config.doc.body.style),r}function o(n,r){return r=r||{timeout:1e4,retry:!1},r.timeout=parseInt(r.timeout,10),isNaN(r.timeout)&&(r.timeout=1e4),new e.Promise(function(e,i){t.loadImage.imageQueue.push({src:n,options:r,done:e,error:i}),u()})}function u(){var e=null;t.loadImage.currentWorkers<t.loadImage.maxWorkers-1&&t.loadImage.imageQueue.length&&(t.loadImage.currentWorkers++,e={image:new Image,work:t.loadImage.imageQueue.shift(),timeout:null,loaded:null,finished:null},e.finished=function(e){return function(n){clearTimeout(e.timeout),e.image.removeEventListener("load",e.finished),e.image.removeEventListener("error",e.finished),e.image.removeEventListener("abort",e.finished),n.type==="load"?e.work.done(e.work.src):e.work.options.retry?o(e.work.src,{retry:!1,timeout:e.work.options.timeout}).then(function(e){return function(t){e(t)}}(e.work.done),function(e){return function(t){e(t)}}(e.work.done)):e.work.error(e.work.src),e.image=null,e=null,t.loadImage.currentWorkers--,u()}}(e),e.image.addEventListener("load",e.finished),e.image.addEventListener("error",e.finished),e.image.addEventListener("abort",e.finished),e.image.src=e.work.src,e.timeout=setTimeout(function(e){return function(){e.finished({type:"error"})}}(e),e.work.options.timeout),e.image.complete&&e.finished({type:"load"}))}function a(n){return n="https:"+n,new e.Promise(function(e,r){t.loadImageFastLane.imageHash[n]={done:e,error:r},t.loadImageFastLane.imageQueue.push(n),f()})}function f(){var e,n;t.loadImageFastLane.currentWorkers<t.loadImageFastLane.maxWorkers&&t.loadImageFastLane.imageQueue.length&&(e=t.loadImageFastLane.imageQueue.shift(),n=l(),n.onmessage=function(e){var n=e.data;t.loadImageFastLane.imageHash[n].done(n),t.loadImageFastLane.currentWorkers--,f()}.bind(this),n.postMessage(e),t.loadImageFastLane.currentWorkers++)}function l(){var e=window.URL||window.webkitURL,t;return t=e.createObjectURL(new Blob(["(",function(){self.onmessage=function(e){var t=new XMLHttpRequest,n=e.data;t.responseType="blob",t.onerror=function(){self.postMessage(n),self.close()},t.onload=function(){self.postMessage(n),self.close()},t.open("GET",n,!0),t.withCredentials=!0,t.send()}}.toString(),")()"],{type:"application/javascript"})),new Worker(t)}function c(t){var n;return t&&(n=e.config.doc.createElement("div"),n.appendChild(e.config.doc.createTextNode(t)),t=n.innerHTML),t}function h(t){var n,r;return e.config.doc.selection?(r=e.config.doc.selection.createRange(),r.moveStart=("character",-t.get("value").length),n=r.text.length):typeof t.get("selectionStart")=="number"&&(n=t.get("selectionStart")),n}function p(){var t="";return typeof e.config.win.getSelection!="undefined"?t=e.config.win.getSelection().toString():typeof e.config.doc.selection!="undefined"&&e.config.doc.selection.type==="Text"&&(t=e.config.doc.selection.createRange().text),t}function d(e){var t={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L"
,"\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u0152":"OE","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u1e9e":"SS","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d"
:"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u0153":"oe","\u0276":"oe","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u017f":"s","\u1e9b":"s","\u00df":"ss","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\uff10":"0","\u2080":"0","\u24ea":"0","\u2070":"0","\u00b9":"1","\u2474":"1","\u2081":"1","\u2776":"1","\u24f5":"1","\u2488":"1","\u2460":"1","\uff11":"1","\u00b2":"2","\u2777":"2","\u2475":"2","\uff12":"2","\u2082":"2","\u24f6":"2","\u2461":"2","\u2489":"2","\u00b3":"3","\uff13":"3","\u248a":"3","\u2476":"3","\u2083":"3","\u2778":"3","\u24f7":"3","\u2462":"3","\u24f8":"4","\u2463":"4","\u248b":"4","\uff14":"4","\u2074":"4","\u2084":"4","\u2779":"4","\u2477":"4","\u248c":"5","\u2085":"5","\u24f9":"5","\u2478":"5","\u277a":"5","\u2464":"5","\uff15":"5","\u2075":"5","\u2479":"6","\u2076":"6","\uff16":"6","\u277b":"6","\u2086":"6","\u2465":"6","\u24fa":"6","\u248d":"6","\uff17":"7","\u2077":"7","\u277c":"7","\u24fb":"7","\u248e":"7","\u2087":"7","\u247a":"7","\u2466":"7","\u2467":"8","\u248f":"8","\u24fc":"8","\u247b":"8","\u2078":"8","\uff18":"8","\u277d":"8","\u2088":"8","\u24fd":"9","\uff19":"9","\u2490":"9","\u277e":"9","\u247c":"9","\u2089":"9","\u2468":"9","\u2079":"9"},n=e.split(""),r=!1,i,s;for(i=n.length-1;i>=0;i--)s=n[i],t.hasOwnProperty(s)&&(n[i]=t[s],r=!0);return r&&(e=n.join("")),e}var t={prefix:{raw:"",css:"",js:"",dom:""},loadImage:{maxWorkers:8,currentWorkers:0,imageQueue:[],workingWorkers:[]},loadImageFastLane:{maxWorkers:8,currentWorkers:0,imageHash:{},imageQueue:[],availabeWorkers:[],workingWorkers:[]}};(function(){n()})(),e.namespace("fluid"),e.mix(e.fluid,{determineBrowserPrefix:n,setStylePrefixed:i,supports:s,prefix:t.prefix,chill:r,loadImage:o,loadImageFastLane:a,escapeHtml:c,getTextFieldCursorPosition:h,getTextFieldSelection:p,removeDiacritics:d})},"@VERSION@",{requires:["flickr-promise"],optional:[],affinity:"client"});
YUI.add("fluid-droparound-view",function(e){"use strict";var t,n;t={css:{destinationContainer:"body",subviewContent:".content.subview",menuContent:".content.menu",droparoundContainer:".droparound",droparoundContent:".body .content",droparrow:".droparrow"},options:{}},n={supportsTransform:!1,droparound:{height:0,width:0}},e.namespace("Views").FluidDroparound=e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){this.set("isActiveViewAgnostic",!0)},buildContainer:function(){return!this.get("textMessage")&&!this.get("htmlMessage")&&!this.get("subview")&&!this.get("menuItems")?(e.Flog.warn("FluidDroparoundView requires a `textMessage`, `htmlMessage`, `subview`, or `menuItems`."),this):(this.get("menuItems")&&this.set("menuItems",this.get("menuItems").filter(function(e){return!e.hidden})),this.setContainerHTML(this.templates("fluid-droparound")({textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),menuItems:this.get("menuItems"),multiSelect:this.get("multiSelect"),showDropArrow:this.get("showDropArrow"),hideModalOverlay:this.get("hideModalOverlay"),classList:this.get("classList"),footContent:this.get("footContent"),headContent:this.get("headContent"),staticWidth:this.get("width"),staticHeight:this.get("height"),positionFixed:this.get("positionFixed"),autoSizeToContent:this.get("autoSizeToContent")})),this.appendAndPosition(),this)},activate:function(){var n=this.get("container"),r=this;return e.OverlayManager.DroparoundOverlay.add(this),this.registerEventHandler(e.on("droparound:reposition",e.bind(this.anchorPositionChange,this))),this.registerEventHandler(e.on("history:change",function(e){if(e.src==="popstate"&&e.prevVal&&e.newVal)if(e.prevVal.flickr&&e.prevVal.flickr.referrer||e.newVal.flickr&&e.newVal.flickr.referrer)return;r.close(e)})),this.get("subview")&&this.loadSubview(),this.get("menuItems")&&this.registerEventHandler(n.one(t.css.menuContent).delegate("click",this.onMenuItemClick.bind(this),"li")),this.get("observePageResize")&&this.observePageResize(),this.get("closeOnScroll")&&this.observePageScroll(),this.fire("activated"),this},getDroparoundContainer:function(){return this.get("container")?this.get("container").one(t.css.droparoundContainer):null},loadSubview:function(){var n,r,i=!1,s=this.get("subview"),o=this;n=this.get("container").one(t.css.subviewContent),n.appendChild(e.Node.create(this.templates("flickr-balls")({})).addClass("flickr-balls")),r=setTimeout(function(){i=!0},40),this.loading=!0,s.appContext=o.appContext,s.set("isActiveViewAgnostic",!0),s.initialize().then(function(e){clearTimeout(r),i&&(e.get("container").addClass("load-transition"),setTimeout(function(){e.get("container").removeClass("load-transition")},1)),o.onSubviewInitialized(e)})},onSubviewInitialized:function(n){var r=this,i=this.get("container").one(t.css.subviewContent);if(!this.loading)return;this.loading=!1,i.one(".flickr-balls").remove(!0),i.appendChild(n.get("container")),n.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&r.fire.apply(r,e.details)}),n.normalizedActivate(),n.recursivelyActivateSubviews(),r.appendAndPosition(),r.registerEventHandler(r.get("subview").on("actionClick",e.bind(r.handleAction,r)))},onMenuItemClick:function(e){var n,r,i;n=e.target.ancestor("li",!0),n&&(r=this.get("container").one(t.css.menuContent).all("li").indexOf(n),r!==-1&&(i=this.get("menuItems")[r],this.get("multiSelect")&&(i.selected=!i.selected,n.toggleClass("selected")),this.fire("selected",{menuItemIndex:r,menuItem:i})))},appendAndPosition:function(){var r=e.one(t.css.destinationContainer),i=this.get("container").one(t.css.droparoundContainer);r&&(r.append(this.get("container")),n.droparound.width=this.get("width")||i.getComputedStyle("width"),n.droparound.height=this.get("height")||i.getComputedStyle("height"),this.repositionToElement(this.get("anchorElement")))},updateTextMessage:function(e){e&&e!==""&&(this.set("textMessage",e),this.buildContainer())},updateHTMLMessage:function(e){e&&e!==""&&(this.set("htmlMessage",e),this.buildContainer())},anchorPositionChange:function(){this.repositionToElement(this.get("anchorElement"))},observePageResize:function(){var t=this;this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(n){e.fire("droparound:reposition"),t.get("closeOnResize")&&t.handleClose(n)}))},observePageScroll:function(){var t=YUI.Env.isServer?0:e.config.win.pageYOffset,n=this;this.get("startingScrollPoint")||this.set("startingScrollPoint",t),this.registerEventHandler(e.globalEvents.subscribe("window:scroll",n.handleScroll.bind(n)))},handleScroll:function(t){var n,r=this.get("startingScrollPoint");r?(n=e.config.win.pageYOffset,r+this.get("closeOnScrollDistance")<n&&this.handleClose(t)):this.set("startingScrollPoint",e.config.win.pageYOffset)},repositionToElement:function(r){var i=this.get("container"),s=e.one("body"),o=i.one(".droparound"),u=o.one(t.css.droparrow),a=r.getXY(),f=this.get("mirrorArrowAdjustment"),l=s.get("offsetWidth"),c=this.get("showDropArrow"),h=this.get("anchorOffsetVertical"),p=this.get("anchorOffsetHorizontal"),d=this.get("anchorPositionOffset"),v=this.get("minVerticalSpace"),m=o.get("offsetHeight"),g=o.get("offsetWidth"),y=parseInt(r.getComputedStyle("width"),10)||r.get("offsetWidth"),b=parseInt(r.getComputedStyle("height"),10)||r.get("offsetHeight"),w=this.get("dropdownArrowWidth"),E=this.get("dropdownArrowHeight"),S=n.droparound.width?parseInt(n.droparound.width,10):parseInt(o.getComputedStyle("width"),10),x=n.droparound.height?parseInt(n.droparound.height,10):parseInt(o.getComputedStyle("height"),10),T=o.one(t.css.droparoundContent),N=this.get("minHorizontalSpace")+Math.max(m,x),C=l-Math.max(g,S)-d-N,k=r.getDOMNode().getBoundingClientRect(),L,A,O,M,_,D,P,H,B,j=this.get("preferLeft"),F=this.get("preferTop"),I=this.get("preferBottom"),q=0,R=this.appContext.viewportData.getHeight();y||(y=0),b||(b=0),L=Math.ceil((y-w)/2),M=S||g,_=x||m,A=a[1]-x-
h,this.get("horizCenterToAnchor")?(O=a[0]+y/2-M/2,q=M/2-w/2):(O=a[0]-p,q=L+f+p),this.get("preferredSide")?this.get("preferredSide")==="left-middle"?(A=a[1]+Math.round(y/2)-h,O=a[0]+y+L+f+p+E,u.removeClass("down").addClass("left").setStyles({left:L+f-Math.round(E/2)+"px",top:(_-E)/2+"px"})):this.get("preferredSide")==="bottom-middle"&&(A=a[1]+Math.round(y/2)-h,O=a[0]+y+L+f+p+E,u.removeClass("down").addClass("up").setStyles({left:(M-w)/2-L+f-Math.round(w/2)+"px",top:_+"px"})):(P=A<v||k.top-x-h<v,H=O>C,B=k.top+k.height+x+h>R,!F&&P||F&&!P||I&&!B?(A=a[1]+b+h,c&&u.removeClass("up").addClass("down").setStyle("left",q+"px")):c&&u.removeClass("down").addClass("up").setStyle("left",q+"px"),this.get("forceLeft")||!j&&H||j&&!H?a[0]+y+p>l?(O=a[0]-S,c&&u.addClass("right").setStyle("left","auto").setStyle("right",L+y+"px")):(O=a[0]-S+y+p,c&&u.addClass("right").setStyle("left","auto").setStyle("right",L+p+"px")):c&&u.removeClass("right").setStyle("right","auto").setStyle("left",q+"px")),o.setXY([O,A]),!this.get("menuItems")&&!this.get("autoSizeToContent")&&(D={width:M+"px",height:_+"px"},T.setStyles(D))},handleClose:function(e){this.close()},handleAction:function(e){this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e)},show:function(){var e=!this.isActivated,t=this;return this.initialize().then(function(){t.isClosed=!1,e||t.activate()}),this},close:function(){var t=this.get("container");this.loading=!1,this.isClosed=!0,this.fire("closeDroparound"),this.destroy(),this.get("subview")&&this.get("subview").destroy(),t&&t.remove(!0),e.OverlayManager.DroparoundOverlay.remove(this)},destructor:function(){this.detachAll()}},{ATTRS:{dismissOnOverlayClick:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnActionClick:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},hideModalOverlay:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},invisibleOverlay:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferredSide:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},footContent:{value:null},headContent:{value:null},width:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},height:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},subview:{value:null},menuItems:{value:null},classList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},anchorElement:{value:null},showDropArrow:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},anchorOffsetVertical:{value:15,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},anchorOffsetHorizontal:{value:5,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},contentPadding:{value:12,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},minVerticalSpace:{value:60,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},minHorizontalSpace:{value:60,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowWidth:{value:21,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowHeight:{value:11},anchorPositionOffset:{value:15,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},observePageResize:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferLeft:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferTop:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferBottom:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},mirrorArrowAdjustment:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},positionFixed:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScroll:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScrollDistance:{value:40,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},closeOnResize:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},overlayClassList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},forceLeft:{value:null},autoSizeToContent:{value
:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},horizCenterToAnchor:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},multiSelect:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","flog","fluid-css","hermes-template-fluid-droparound","fluid-balls-css","hermes-template-flickr-balls","fluid-overlay-manager-view","attribute-helpers"],optionalRequires:["fluid"]});
YUI.add("footer-full-view",function(e){var t=["en-US","zh-HK","de-DE","es-US","fr-FR","ko-KR","it-IT","pt-BR","vn-VN","id-ID"],n={"en-US":"English","de-DE":"Deutsch","es-US":"Espa\u00f1ol","fr-FR":"Fran\u00e7ais","ko-KR":"\ud55c\uae00","it-IT":"Italiano","pt-BR":"Portugu\u00eas","vn-VN":"Ti\u1ebfng Vi\u1ec7t","id-ID":"Bahasa Indonesia","zh-HK":"\u7e41\u9ad4\u4e2d\u6587"};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML('<div class="footer-full-content"></div>'),this.appStateParams=e,this.set("hideOptOutBanner",e.hideOptOutBanner),this.set("showOptOutBanner",e.showOptOutBanner),this.set("hideMobileBanner",e.hideMobileBanner),this},subviewConfig:{},loadState:function(){var r,i,s;s=this.appContext.auth&&this.appContext.auth.csrf?this.appContext.auth.csrf:"",this.lang=this.appContext.lang,this.menuLangs=[],this.lang==="zh-Hant-HK"&&(this.lang="zh-HK"),this.lang.toLowerCase()==="vi-vn"&&(this.lang="vn-VN"),this.selectedLang={code:this.lang,name:n[this.lang],csrf:s};for(r=0,i=t.length;r<i;r++){if(t[r]===this.lang)continue;typeof t[r]=="string"&&this.menuLangs.push({code:t[r].toLowerCase(),name:n[t[r]],csrf:s})}return e.Promise.resolve()},buildContainer:function(){var t={},n={},r=this.appContext.flipper.toJSON();return this.get("viewer")&&(t=e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))})),n={flippers:r,displayLangs:this.displayLangs,selectedLang:this.selectedLang,menuLangs:this.menuLangs},YUI.Env.isServer?n.pageUrl=this.appContext.request.url:n.pageUrl=window.location.pathname,this.appContext.getCookie("mobile_allow_www")&&!this.appStateParams.hideMobileBanner?n.isOptedOutOfMobile=!this.get("hideMobileBanner"):!this.appContext.getCookie("mobile_allow_www")&&this.get("hideMobileBanner")&&(n.hasNoOptOut=!0),this.setContainerHTML(this.templates("footer-full")(n)),this},activate:function(){var t=this.get("container"),n=t.one(".lang-switcher"),r=n.one("a"),i=t.one(".foot-mobile-banner a"),s=t.one(".opt-out-www");return this.menuLangsFormatted=this.menuLangs.map(function(e){return{href:"/change_language.gne?lang="+e.code+"&csrf="+e.csrf,text:e.name}}),this.registerEventHandler(n.on("click",function(t){t.preventDefault(),r.addClass("dimmed");var i=new e.Views.FluidDroparound({anchorOffsetHorizontal:n.get("offsetWidth"),appContext:this.appContext,showDropArrow:!0,observePageResize:!0,dismissOnOverlayClick:!0,anchorElement:n.one(".arrow"),classList:["lang-droparound"],menuItems:this.menuLangsFormatted});i.show(),this.registerEventHandler(i.on("closeDroparound",function(e){r.removeClass("dimmed")}),this)},this)),i&&this.registerEventHandler(i.on("click",function(e){this.appContext.removeCookie({cookieName:"mobile_allow_www",path:"/"})},this)),s&&this.registerEventHandler(s.on("click",function(e){this.appContext.setCookie({cookieName:"mobile_allow_www",path:"/",cookieValue:1})},this)),this}})},"@VERSION@",{requires:["flickr-view","hermes-template-footer-full","footer-full-css","url-helper","flickrui-css","flickrui-dialogs-css","dropdown","fluid-droparound-view"],langBundles:["common"]});
YUI.add("hermes-template-photo-list-aft",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){var n="",r;return n+="\n					img = new Image();\n					img.addEventListener('load', function onImageLoad (event) {\n						this.removeEventListener('load', onImageLoad);\n						timingCache['"+a((r=e.id,typeof r===u?r.apply(e):r))+"'] = new Date().getTime();\n					});\n					img.src='"+a((r=e.url,typeof r===u?r.apply(e):r))+"';\n				",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<script type="text/javascript">\n	try {\n\n		(function () {\n\n				if (!window.paftTiming) {\n					return;\n				}\n\n				var timingCache = {},\n				    img;\n\n				window.paftTiming[\'',(o=n.photolistId)?o=o.call(t,{hash:{},data:i}):(o=t.photolistId,o=typeof o===u?o.apply(t):o),s+=a(o)+"'] = timingCache;\n\n				",o=n.each.call(t,t.photos,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n\n		})();\n\n	} catch (error) {\n\n		if (window.sendRequest){\n			window.sendRequest('flickr.hermes.photolistAFT.failure', 'Photolist timing failed.');\n		}\n	}\n</script>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-list-aft",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-infinite-scroll-load-more",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="infinite-scroll-load-more">\n	<button class="alt">',u={hash:{intlName:"common.LOAD_MORE_RESULTS"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):a.call(t,"intlMessage",u)))+"</button>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/infinite-scroll-load-more",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-license-detail",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<p class="secondary" style="margin-top: 0;">',u={hash:{intlName:t.title},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):a.call(t,"intlMessage",u)))+'</p>\n<p class="secondary" style="margin-bottom: 0;">',u={hash:{intlName:t.body},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):a.call(t,"intlMessage",u)))+"</p>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/license-detail",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-list-layout-row",function(e){var t=e.PhotoListLayoutRow=function(e){this.top=e.top,this.left=e.left,this.width=e.width,this.spacing=e.spacing,this.targetRowHeight=e.targetRowHeight,this.targetRowHeightTolerance=e.targetRowHeightTolerance,this.minAspectRatio=this.width/e.targetRowHeight*(1-e.targetRowHeightTolerance),this.maxAspectRatio=this.width/e.targetRowHeight*(1+e.targetRowHeightTolerance),this.edgeCaseMinRowHeight=e.edgeCaseMinRowHeight||Number.NEGATIVE_INFINITY,this.edgeCaseMaxRowHeight=e.edgeCaseMaxRowHeight||Number.POSITIVE_INFINITY,this.rightToLeft=e.rightToLeft,this.isBreakoutRow=e.isBreakoutRow,this.items=[],this.height=0};t.prototype={addItem:function(t){var n=this.items.concat(t),r=this.width-(n.length-1)*this.spacing,i=n.reduce(function(e,t){return e+t.aspectRatio},0),s=r/this.targetRowHeight,o,u,a;return this.isBreakoutRow&&this.items.length===0&&t.aspectRatio>=1?(this.items.push(e.merge(t)),this._completeLayout(r/t.aspectRatio),!0):i===0?!1:i<this.minAspectRatio?(this.items.push(e.merge(t)),!0):i>this.maxAspectRatio?this.items.length===0?(this.items.push(e.merge(t)),this._completeLayout(r/i),!0):(o=this.width-(this.items.length-1)*this.spacing,u=this.items.reduce(function(e,t){return e+t.aspectRatio},0),a=o/this.targetRowHeight,Math.abs(i-s)>Math.abs(u-a)?(this._completeLayout(o/u),!1):(this.items.push(e.merge(t)),this._completeLayout(r/i),!0)):(this.items.push(e.merge(t)),this._completeLayout(r/i),!0)},forceComplete:function(e,t){var n=this.width-(this.items.length-1)*this.spacing,r=this.items.reduce(function(e,t){return e+t.aspectRatio},0);typeof t=="number"?this._completeLayout(t,!1):e?this._completeLayout(n/r):this._completeLayout(this.targetRowHeight,!1)},isLayoutComplete:function(){return this.height>0},getItems:function(){return this.rightToLeft?this.items.reverse():this.items},getIndexOfItem:function(e){var t=-1;return this.items.some(function(n,r){if(n.id===e)return t=r,!0}),t},setTop:function(e){this.top=e,this.items.forEach(function(t){t.geometry.top=e})},_completeLayout:function(e,t){var n=this.rightToLeft?-this.left:this.left,r=this.width-(this.items.length-1)*this.spacing,i,s,o,u,a,f,l=this;typeof t=="undefined"&&(t=!0),s=Math.round(e),o=Math.max(this.edgeCaseMinRowHeight,Math.min(s,this.edgeCaseMaxRowHeight)),s!==o?(this.height=o,i=r/o/(r/s)):(this.height=s,i=1),this.items.forEach(function(e,t){e.geometry={top:l.top,width:Math.round(e.aspectRatio*l.height*i),height:l.height},l.rightToLeft?e.geometry.left=l.width-n-e.geometry.width:e.geometry.left=n,n+=e.geometry.width+l.spacing}),t&&(this.rightToLeft||(n-=this.spacing+this.left),u=(n-this.width)/this.items.length,a=this.items.map(function(e,t){return Math.round((t+1)*u)}),this.items.length===1?(f=this.items[0].geometry,f.width-=Math.round(u),this.rightToLeft&&(f.left+=Math.round(u))):this.items.forEach(function(e,t){t>0?(e.geometry.left-=a[t-1],e.geometry.width-=a[t]-a[t-1]):e.geometry.width-=a[t]}))}}},"@VERSION@",{requires:[]});
YUI.add("photo-list-layout",function(e){var t={containerPadding:{top:8,right:8,bottom:8,left:8},itemSpacing:{horizontal:8,vertical:8},targetRowHeight:320,targetRowHeightTolerance:.25,awakeBoundsToViewportSizeRatio:3,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:Number.NaN,alwaysDisplayOrphans:!1,sleepTopAndBottom:!0,sleepLeftAndRight:!1,fullWidthBreakoutRowCadence:!1,deferWakeSleepUntil:2500},n=1060,r=1e3,i=e.PhotoListLayout=function(n){if(!n.appContext)throw new Error("PhotoListLayout must be instantiated with `params.appContext`.");n=e.merge(t,n),this.appContext=n.appContext,this.containerWidth=n.containerWidth,this.viewportContainerNodeHeight=n.viewportContainerNodeHeight||this.appContext.viewportData.getHeight(),this.containerPadding=n.containerPadding,this.itemSpacing=n.itemSpacing,this.targetRowHeight=n.targetRowHeight,this.targetRowHeightTolerance=n.targetRowHeightTolerance,this.awakeBoundsToViewportSizeRatio=n.awakeBoundsToViewportSizeRatio,this.maxNumRows=n.maxNumRows,this.forceAspectRatio=n.forceAspectRatio,this.alwaysDisplayOrphans=n.alwaysDisplayOrphans,this.sleepTopAndBottom=n.sleepTopAndBottom,this.sleepLeftAndRight=n.sleepLeftAndRight,this.fullWidthBreakoutRowCadence=n.fullWidthBreakoutRowCadence,this.deferWakeSleepUntil=n.deferWakeSleepUntil,this._layoutItems=[],this._awakeItems=[],this._inViewportItems=[],this._leadingOrphans=[],this._trailingOrphans=[],this._containerHeight=this.containerPadding.top,this._rows=[],this._orphans=[]};i.prototype={getCurrentLayout:function(){return this._layoutItems.concat()},getAwakeItems:function(){return this._awakeItems.concat()},getInViewportItems:function(){return this._inViewportItems.concat()},hasLimitedNumberOfRows:function(){return this.maxNumRows!==t.maxNumRows},getLayoutItem:function(e){var t=null;return this._layoutItems.some(function(n){if(n.id===e)return t=n,!0}),t},getItemsInRow:function(e){return this._rows.length<=e?[]:this._rows[e].items.concat()},invalidateItem:function(e){var t,n=function(n,r,i){if(n.id===e)return i.splice(r,1),t=!0,!0};return this._layoutItems.some(n),this._leadingOrphans.some(n),this._trailingOrphans.some(n),this._rows.some(function(e){return e.items.some(n)}),this._orphans.some(n),t},clear:function(){this._layoutItems=[],this._leadingOrphans=[],this._trailingOrphans=[],this._containerHeight=this.containerPadding.top,this._rows=[],this._orphans=[]},updateTargetRowHeight:function(e){this.targetRowHeight=e,this.updatedRowHeight=this.targetRowHeight},computeLayout:function(t,r,i,s){var o={},u,a=[],f=[],l=[],c=!1,h,p,d,v,m,g,y,b,w=this;this.containerWidth||(e.Flog.warn("No valid containerWidth set on photo-list-layout; falling back to "+n+"."),this.containerWidth=n),t||(t=[]),this.forceAspectRatio&&t.forEach(function(e){e.forcedAspectRatio=!0,e.aspectRatio=w.forceAspectRatio}),u=this._layoutItems.concat(),this._layoutItems.forEach(function(e){o[e.id]=e}),s||(s={diffType:"append"});switch(s.diffType){case"prepend":t=t.concat(this._leadingOrphans),this._leadingOrphans=[],t.reverse(),c=!0;break;case"merge":e.Flog.warn("Due to the whims of product management, `merge` layouts are not yet implemented."),this.updateLayoutFrom(t,s.mergeStartIndex);break;case"relayout":s.diffDirection?s.diffDirection==="top"?t=t.concat(this._leadingOrphans.concat(this._layoutItems.concat(this._trailingOrphans))):s.diffDirection==="bottom"&&(t=this._leadingOrphans.concat(this._layoutItems.concat(this._trailingOrphans)).concat(t)):t=this._leadingOrphans.concat(this._layoutItems.concat(this._trailingOrphans)),this.clear();break;case"append":default:t=this._trailingOrphans.concat(t),this._trailingOrphans=[],this._rows.length>1&&(this._containerHeight=this._containerHeight-this.containerPadding.bottom+this.itemSpacing.vertical)}return t.some(function(t,n){d=!1,h||(h=w.createNewRow(c)),p=h.addItem(t);if(h.isLayoutComplete()){a=a.concat(w.addRow(h,c));if(w._rows.length>=w.maxNumRows)return h=null,!0;h=w.createNewRow(c);if(!p){p=h.addItem(t);if(h.isLayoutComplete()){a=a.concat(w.addRow(h,c));if(w._rows.length>=w.maxNumRows)return h=null,!0;h=w.createNewRow(c)}else p||(d=!0)}}else p||(d=!0);d&&e.Flog.warn("PhotoListLayout::computeLayout() Item not added and layout not complete:",t)}),this._rows.length>=this.maxNumRows?this._trailingOrphans=t.slice(this._layoutItems.length):h&&h.getItems().length&&(c?s.firstPage?(h.forceComplete(!0),a=a.concat(w.addRow(h,c))):this._leadingOrphans=h.getItems().reverse():s.lastPage||this.alwaysDisplayOrphans?(this._rows.length?(this._rows[this._rows.length-1].isBreakoutRow?b=this._rows[this._rows.length-1].targetRowHeight:b=this._rows[this._rows.length-1].height,h.forceComplete(!1,this.updatedRowHeight||b)):this.alwaysDisplayOrphans&&u.length?u[u.length-1].geometry&&h.forceComplete(!1,this.updatedRowHeight||u[u.length-1].geometry.height):h.forceComplete(!1),a=a.concat(w.addRow(h,c)),delete this.updatedRowHeight):this._trailingOrphans=h.getItems().concat()),a.forEach(function(e){o[e.id]?l.push(e):f.push(e)}),this._containerHeight=this._containerHeight-this.itemSpacing.vertical+this.containerPadding.bottom,c&&(y=this.containerPadding.top,this._rows.forEach(function(e){e.setTop(y),y+=e.height+w.itemSpacing.vertical}),l=u.concat()),g=this.computeWakeSleep(r,i,o),v=g.wakeSleepChangedItems,m=g.inViewportChangedItems,this._trailingOrphans.concat(this._leadingOrphans).forEach(function(e){o[e.id]&&(e.isAwake=!1,v.push(e))}),{allLayoutItems:this._layoutItems.concat(),newItems:f,layoutChangedItems:l,wakeSleepChangedItems:v,inViewportChangedItems:m,leadingOrphans:this._leadingOrphans.concat(),trailingOrphans:this._trailingOrphans.concat(),containerHeight:this._containerHeight}},computeWakeSleep:function(t,n,i){var s=this._awakeItems=[],o=this._inViewportItems=[];t||(t=0),n||(n=0),this.viewportContainerNodeHeight||(e.Flog.warn("No valid viewport height available for photo-list-layout; falling back to "+r+"."),this.viewportContainerNodeHeight=r);var u=this.viewportContainerNodeHeight,a=.5*u*(this.awakeBoundsToViewportSizeRatio-1
),f=t,l=t+u,c=f-a,h=l+a,p,d,v,m,g=[],y=[],b,w,E=this._layoutItems.length<this.deferWakeSleepUntil,S=this;return this.sleepLeftAndRight&&(p=this.appContext.viewportData.getWidth(),d=.5*p*(this.awakeBoundsToViewportSizeRatio-1),v=n-d,m=n+p+d),this._layoutItems.forEach(function(e){i&&(b=i[e.id]),E?e.isAwake=!0:(S.sleepTopAndBottom?e.isAwake=e.geometry.top+e.geometry.height>=c&&e.geometry.top<h:e.isAwake=!0,e.isAwake&&S.sleepLeftAndRight&&(e.isAwake=e.geometry.left+e.geometry.width>=v&&e.geometry.left<m)),(!b||b.isAwake!==e.isAwake)&&g.push(e),e.isAwake&&s.push(e),e.isInViewport=e.geometry.top+e.geometry.height>=f&&e.geometry.top<l,(!w||w.isInViewport!==e.isInViewport)&&y.push(e),e.isInViewport&&o.push(e)}),{allLayoutItems:i?this._layoutItems:this._layoutItems.concat(),newItems:[],layoutChangedItems:[],wakeSleepChangedItems:g,inViewportChangedItems:y,leadingOrphans:this._leadingOrphans.concat(),trailingOrphans:this._trailingOrphans.concat(),containerHeight:this._containerHeight}},updateLayoutFrom:function(e,t){var n,r,i,s;this._layoutItems.length&&this._layoutItems.length>t&&(n=this._layoutItems[t],r=this.getRowOfItem(n.id),r&&(this._rows=this._rows.slice(0,r.index),i=this._rows[this._rows.length-1],i?this._containerHeight=i.top+i.height:this._containerHeight=0,r.indexInRow>0&&(s=this._layoutItems.splice(-r.indexInRow),s=s.map(function(e){return{id:e.id,aspectRatio:e.aspectRatio,layoutType:e.layoutType}}),e.unshift.apply(e,s))),this._layoutItems=this._layoutItems.slice(0,Math.min(this._layoutItems.length,t)))},createNewRow:function(t){var n=!1;return this.fullWidthBreakoutRowCadence!==!1&&(this._rows.length+1)%this.fullWidthBreakoutRowCadence===0&&(n=!0),new e.PhotoListLayoutRow({top:this._containerHeight,left:this.containerPadding.left,width:this.containerWidth-this.containerPadding.left-this.containerPadding.right,spacing:this.itemSpacing.horizontal,targetRowHeight:this.targetRowHeight,targetRowHeightTolerance:this.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*this.targetRowHeight,edgeCaseMaxRowHeight:2*this.targetRowHeight,rightToLeft:t,isBreakoutRow:n})},addRow:function(e,t){return t?(this._rows.unshift(e),this._layoutItems=e.getItems().reverse().concat(this._layoutItems)):(this._rows.push(e),this._layoutItems=this._layoutItems.concat(e.getItems())),this._containerHeight+=e.height+this.itemSpacing.vertical,e.items},getRowOfItem:function(e){var t,n,r;for(n=0;n<this._rows.length;n++){t=this._rows[n],r=t.getIndexOfItem(e);if(r!==-1)return{row:t,index:n,indexInRow:r}}return null}}},"@VERSION@",{requires:["photo-list-layout-row","flog"]});
YUI.add("hermes-template-photo-list-photo",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function f(e,t){return'\n	<div class="interaction-view"></div>\n'}function l(e,t){var r="",i;return r+='\n	<a class="click-target" href="',(i=n.photoPageUrl)?i=i.call(e,{hash:{},data:t}):(i=e.photoPageUrl,i=typeof i===o?i.apply(e):i),r+=u(i)+'"></a>\n',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n["if"].call(t,t.hasInteraction,{hash:{},inverse:a.program(3,l,i),fn:a.program(1,f,i),data:i}),s||s===0?s:""}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-list-photo",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-list-photo-view",function(e){e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.set("isZombie",!YUI.Env.isServer&&e.requiredToShowOnServer&&!this.get("layoutItem").isAwake),this},loadState:function(){var t=e.URLHelper.getPhotoPage({photoId:this.get("model").getValue("id"),pathAlias:this.get("model").getValue("owner").getValue("pathAlias"),contextSuffix:this.get("contextSuffix")});return this.set("photoPageUrl",t),e.Promise.resolve()},buildContainer:function(){var t=this.get("container"),n=this.get("layoutItem"),r;if(n.isAwake){this.updateGeometry(),this.setContainerHTML(this.render()),YUI.Env.isServer?(t.setStyles({"background-image":"url("+this.get("photoUrl")+")"}),t.addClass("awake"),this.get("model").getValue("needsInterstitial")&&t.addClass("restricted-image")):(this.get("showLowResImageFirst")&&t.setStyles({backgroundImage:"url("+this.get("model").getValue("sizes").sq.url+")"}).addClass("low-res"),this.downloadCacheAndSetImage());if(this.appContext.flipper.isFlipped("enable-curator-tools")&&this.appContext.getViewer().isInsecureGod){var i=this.get("model").getValue("curation"),s=i&&i.getValue("statusColor");s&&(t.addClass("curation-border"),t.setStyle("outline-color",s))}}else if(YUI.Env.isServer)this.set("isZombie",!0);else if(!YUI.Env.isServer||this.get("isZombie")){var o="";r=e.Node.create(this.get("placeHolderHTML")).set("innerHTML",this.render()),this.get("model").getValue("needsInterstitial")&&(o=" restricted-image"),r.setAttrs({id:t.getAttribute("id"),className:t.getAttribute("class")+o}),this.updateNodeGeometry(n,r),this.serialize(r),this.set("isReallySleeping",!0),this.set("isZombie",!1),this.downloadCacheAndSetImage()}return this.get("model").getValue("isVideo")&&this.get("container").addClass("is-video"),this},activate:function(){var e;return this.renderInteractionView().then(function(e){this.fire("activated")}.bind(this)),this.get("showLowResImageFirst")&&(e=this.get("parentContainer").getDOMNode(),e.addEventListener("transitionend",this.removeTransition),e.addEventListener("webkitTransitionEnd",this.removeTransition)),this},setHoverVisible:function(e){var t=this.get("interactionContainer");t&&(e?t.addClass("manual-hover"):t.removeClass("manual-hover"))},render:function(){return this.templates("photo-list-photo")({photoPageUrl:this.get("photoPageUrl"),hasInteraction:!!this.get("interactionViewName")&&!this.appContext.forceServerRender})},removeTransition:function(e){e&&e.target&&e.target.classList&&e.target.classList.contains("photo-list-photo-view")&&e.target.classList.remove("low-res")},downloadCacheAndSetImage:function(){e.fluid.loadImage(this.get("photoUrl"),{timeout:1e3,retry:!0}).then(function(e){this.handleImageLoad(!0,e)}.bind(this),function(e){this.handleImageLoad(!1,e+"?retry="+Date.now())}.bind(this))},handleImageLoad:function(t,n){var r=this.get("isReallySleeping"),i;i=r?this.deserialize():this.get("container"),i.setStyle("backgroundImage","url("+n+")"),t||i.setStyle("backgroundColor","#eee"),this.get("model").getValue("needsInterstitial")&&i.addClass("restricted-image"),r?this.serialize(i):e.fluid.chill(function(){var e=this.get("container");r||(e.addClass("awake"),this.fire(t?"loaded":"loadError"))},this),i=null},updateGeometry:function(e){var t=this.get("isReallySleeping"),n;e?this.set("layoutItem",e):e=this.get("layoutItem"),n=t?this.deserialize():this.get("container"),this.updateNodeGeometry(e,n),t&&this.serialize(n),n=null},updateNodeGeometry:function(t,n){YUI.Env.isServer?n.setStyles({transform:"translate("+t.geometry.left+"px, "+t.geometry.top+"px)","-webkit-transform":"translate("+t.geometry.left+"px, "+t.geometry.top+"px)","-ms-transform":"translate("+t.geometry.left+"px, "+t.geometry.top+"px)"}):e.fluid.setStylePrefixed("transform","translate("+t.geometry.left+"px, "+t.geometry.top+"px)",n),n.setStyles({width:t.geometry.width+"px",height:t.geometry.height+"px"})},sleep:function(){var t,n,r;this.get("isReallySleeping")||(YUI.Env.isServer?this.set("isZombie",!0):(t=this.get("id"),this.destroyInteractionView(),r=this.get("container"),r.removeClass("awake"),this.serialize(r),n=e.Node.create(this.get("placeHolderHTML")),this.get("parentContainer").replaceChild(n,r),this.set("container",n),this.set("isReallySleeping",!0),this.set("isZombie",!1),r=null))},wake:function(){var t,n,r,i;this.get("isReallySleeping")&&(t=this.get("id"),n=this.get("container"),r=this.get("parentContainer"),i=this.deserialize(),r.replaceChild(i,n),this.set("container",i),this.set("isReallySleeping",!1),this.renderInteractionView(),e.fluid.chill(function(){this.get("container").addClass("awake")},this),n=null)},isAwake:function(){return!this.get("isReallySleeping")},serialize:function(t){if(YUI.Env.isServer)throw new Error("Impossible to `serialize` on the server (uses sessionStorage). Maybe you meant to call `sleep`?");t&&e.Storage.Instance.set(this.get("storageId"),t.getDOMNode().outerHTML)},deserialize:function(){if(YUI.Env.isServer)throw new Error("Impossible to `deserialize` on the server (uses sessionStorage). Maybe you meant to call `wake`?");var t=e.Storage.Instance.get(this.get("storageId")),n;return t&&(n=e.Node.create(t),this.dematerialize()),n},dematerialize:function(){if(YUI.Env.isServer)throw new Error("Impossible to `dematerialize` on the server (uses sessionStorage).");e.Storage.Instance.remove(this.get("storageId"))},renderInteractionView:function(){var t=this.get("interactionViewName"),n=this.get("interactionView"),r;return t&&!n?this.appContext.getView(t,e.merge(this._params,{id:this.get("id"),container:this.get("interactionContainer"),model:this.get("model"),listModelParams:this.get("listModelParams"),photoPageUrl:this.get("photoPageUrl"),isActiveViewAgnostic:this.get("isActiveViewAgnostic"),engagementModelName:this.get("engagementModelName"),layoutWidth:this.get("layoutItem").geometry
.width})).then(function(e){return this.set("interactionView",e),e.initialize()}.bind(this)):n?(n.get("container").inDoc()||(r=n.get("container"),r.addClass("interaction-view"),this.get("interactionContainer")||this.buildContainer(),this.get("container").replaceChild(r,this.get("interactionContainer")),n.normalizedActivate()),e.Promise.resolve(n)):e.Promise.resolve(null)},destroyInteractionView:function(){var e=this.get("interactionView");e&&(e.destroy(),this.set("interactionView",null))},destructor:function(){this.dematerialize()}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(t,n){return e.TypeValidator.matches.photoId(t)}},parentSignature:{writeOnce:"initOnly"},storageId:{readOnly:!0,derivedBy:["id","parentSignature"],getter:function(){return this.get("parentSignature")+"-"+this.get("id")}},layoutItem:{validator:function(e,t){return typeof e=="object"&&e.hasOwnProperty("aspectRatio")&&e.hasOwnProperty("geometry")&&typeof e.geometry=="object"&&e.geometry.hasOwnProperty("width")&&e.geometry.hasOwnProperty("height")&&e.geometry.hasOwnProperty("top")&&e.geometry.hasOwnProperty("left")&&e.hasOwnProperty("isAwake")}},photoUrl:{value:"/images/spaceball.gif",getter:function(e,t){var n=this.get("model"),r=this.get("layoutItem"),i;return i=n.getSizeToFit({width:r.geometry.width,height:r.geometry.height},{includeSquare:r.aspectRatio===1}),i.url}},photoPageUrl:{writeOnce:!0,validator:function(t,n){return e.AttributeHelpers.validateString(t)}},model:{value:null},listModelParams:{value:null},parentContainer:{writeOnce:"initOnly"},contextSuffix:{writeOnce:"initOnly",value:null,validator:function(t,n){return e.AttributeHelpers.validateString(t)}},measureAFT:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)}},isReallySleeping:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)}},isZombie:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)}},placeHolderHTML:{value:'<div class="youcansleepwhenyouredead" />',validator:function(t,n){return e.AttributeHelpers.validateString(t)}},showLowResImageFirst:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)}},interactionViewName:{writeOnce:"initOnly",value:null,validator:function(t,n){return e.AttributeHelpers.validateString(t)}},engagementModelName:{writeOnce:"initOnly",value:null,validator:function(t,n){return e.AttributeHelpers.validateString(t)}},interactionView:{value:null},interactionContainer:{value:null,getter:function(e,t){return!e&&!YUI.Env.isServer&&(e=this.get("container").one(".interaction-view")),e}}}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-list-photo","photo-list-photo-css","type-validator","url-helper","attribute-helpers"],optionalRequires:["fluid","storage-helper"],langBundles:["common"]});
YUI.add("photo-list-view",function(e){"use strict";var t={containerWidth:"fullWidth",subtractScrollbarWidth:!1,pageParams:{page:1,perPage:50},parentName:"",subviewMapping:{"photo-models":{name:"photo-list-photo-view",params:null},"photo-lite-models":{name:"photo-list-photo-view",params:null},"set-models":{name:"photo-list-album-view",params:null}},paginateOnScroll:!0,keepAwakeOnScroll:!1,parentContainer:e.config.win,loadMoreMargin:3,relayoutOnResize:!0,recenterOnResize:!1,responsiveRowHeight:!1,maintainScrollPosition:!0,interactionViewName:"photo-list-photo-interaction-view",engagementModelName:"photo-engagement-models",itemFilterFunction:null,injectPhotolistContextParams:null,measureAFT:!1,beaconViews:!0,scrollInterruptParams:null,scrollToWithId:!1,handleCollectionChanged:!1},n={480:.5,800:.75,1280:1,1600:1.25},r=Object.keys(n),i=300;e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(n){var r=e.merge(t,n.photoListConfig),i;if(typeof r=="undefined")throw new Error("photo-list-view must be initialized with config params wrapped in a `photoListConfig` object.");if(r.initialItems)this.initialItems=r.initialItems.concat(),r.paginateOnScroll=!1;else{if(typeof r.modelParams=="undefined")throw new Error("photo-list-view must be initialized with `modelParams`.");if(typeof r.modelParams.registryName=="undefined")throw new Error("photo-list-view must be initialized with `modelParams.registryName`.");if(typeof r.modelParams.modelIdOrAttributes=="undefined")throw new Error("photo-list-view must be initialized with `modelParams.modelIdOrAttributes`.");if(typeof r.modelParams.collectionAttributeName=="undefined")throw new Error("photo-list-view must be initialized with `modelParams.collectionAttributeName`.")}if(typeof r.parentName=="undefined")throw new Error("photo-list-view must be initialized with the `parentName` (the name of the module containing the photolist).");return this.parentName=r.parentName,this.modelParams=r.modelParams,this.pageParams=r.pageParams,this.subviewMapping=r.subviewMapping,this.loadMoreMargin=r.loadMoreMargin,this.relayoutOnResize=r.relayoutOnResize,this.recenterOnResize=r.recenterOnResize,this.responsiveRowHeight=r.responsiveRowHeight,this.contextSuffix=r.contextSuffix,this.measureAFT=r.measureAFT,!YUI.Env.isServer&&r.beaconViews&&(this.viewBeaconer={beaconer:this.appContext.getViewCounter(),beaconAttribute:r.viewBeaconAttribute||"id",beaconRestrictedAttribute:r.viewBeaconRestrictedAttribute||"needsInterstitial",beaconAlwaysBeacon:r.viewBeaconAlwaysBeacon||!1,beaconIsOwnerAttribute:r.viewBeaconIsOwnerAttribute||"isOwner"}),r.subtractScrollbarWidth?YUI.Env.isServer?this.scrollbarWidth=this.appContext.viewportData.scrollbarWidth:this.scrollbarWidth=e.OverflowHelper.detectScrollbarSize(e.one("body")):this.scrollbarWidth=0,r.layout?(r.layout instanceof e.PhotoListLayout?(e.Flog.warn("Passing a PhotoListLayout instance into PhotoListView is deprecated. Instead, send the layout config object, and PhotoListView will create the PhotoListLayout for you."),this.photoListLayout=r.layout):(this.appContext.getUA().isMobileBrowser&&r.mobileLayout&&(Object.keys(r.mobileLayout).length===0&&(r.mobileLayout={targetRowHeight:200,containerPadding:{right:16,left:16},itemSpacing:{horizontal:16,vertical:16}}),r.layout.targetRowHeight=r.mobileLayout.targetRowHeight||r.layout.targetRowHeight,r.layout.containerPadding=e.merge(r.layout.containerPadding||{},r.mobileLayout.containerPadding||{}),r.layout.itemSpacing=e.merge(r.layout.itemSpacing||{},r.mobileLayout.itemSpacing||{})),this.photoListLayout=new e.PhotoListLayout(e.merge(r.layout,{appContext:this.appContext}))),delete r.layout.appContext):this.photoListLayout=new e.PhotoListLayout({appContext:this.appContext}),this.photoListLayout.containerWidth||(YUI.Env.isServer||(i=this.appContext.flapp.get("activeView")),this.appContext.hasClientSideRouted()&&i&&i.name===this.parentName?this.photoListLayout.containerWidth=this.calculateContainerWidth("previousContainerWidth"):(this.explicitContainerWidth=r.containerWidth,this.photoListLayout.containerWidth=this.calculateContainerWidth(this.explicitContainerWidth))),this.baseRowHeight=this.photoListLayout.targetRowHeight,this.responsiveRowHeight&&this.adjustRowHeightToContainerWidth(),this.paginateOnScroll=r.paginateOnScroll,this.paginateOnScroll&&this.photoListLayout.layout&&this.photoListLayout.hasLimitedNumberOfRows()&&e.Flog.warn("When photo-list-layout::maxNumRows is specified, photo-list::paginateOnScroll should probably be set to `false`."),this.parentContainer=r.parentContainer,this.keepAwakeOnScroll=r.keepAwakeOnScroll,this.keepAwakeOnScroll&&(this.photoListLayout.sleepTopAndBottom=!1),this.loadingMoreBottom=!1,this.loadingMoreTop=!1,this.lastItemCached=!1,this.firstItemCached=!1,this.itemsMappedToAspectRatios=[],this.lowestPageInView=this.pageParams.page,this.highestPageInView=this.pageParams.page,this.pageParams.viewPageSize&&(this.lastPageInView=this.pageParams.page+Math.ceil(this.pageParams.viewPageSize/this.pageParams.perPage)-1,isNaN(this.lastPageInView)&&e.Flog.warn("Error calculating `this.lastPageInView`. Verify values passed for `config.pageParams`.")),this.modelsById={},this.subviewsById={},this.fetchedOnlyInitPage=!1,this.perPageDoubles=0,this.interactionViewName=r.interactionViewName,this.engagementModelName=r.engagementModelName,this.maintainScrollPosition=r.maintainScrollPosition,this.scrollToWithId=r.scrollToWithId,this.handleCollectionChanged=r.handleCollectionChanged,this.itemFilterFunction=r.itemFilterFunction,r.injectPhotolistContextParams&&(this.injectPhotolistContextParams=e.merge(r.injectPhotolistContextParams)),this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.aftCache={},r.scrollInterruptParams&&(this.scrollInterruptParams=r.scrollInterruptParams,this.scrollInterruptState={nextInterrupt:this.scrollInterruptParams.pageCounts[0],numPagesLoaded:0,numInterrupts:0,isInterrupted:!1,footer:null,footerHeight
:0}),delete n.photoListConfig,this.params=n,this},loadState:function(){var t=this,n,r;return this.initialItems?this.setItems(this.initialItems).then(this.loadStateSubviewsReady.bind(this),function(t){e.Flog.warn("Error displaying initial items:",t)}):(n=e.merge(this.modelParams.fetchParams,this.pageParams),this.paginateOnScroll&&!this.scrollToWithId&&(n.page=(this.pageParams.page-1)*2+1,n.perPage=Math.floor(.5*this.pageParams.perPage),this.fetchedOnlyInitPage=!0),this.appContext.getModel(this.modelParams.registryName,this.modelParams.modelIdOrAttributes,n).then(function(i){var s=i.getValue(t.modelParams.collectionAttributeName),o=s.getList(),u;t.set("collectionModel",i);if(t.lastPageInView)return r=Math.min(s.getNextIncompletePage(t.pageParams),t.lastPageInView+1),r<=t.pageParams.page?s.getPage(n):(u=s.getList().slice((t.pageParams.page-1)*t.pageParams.perPage,(r-1)*t.pageParams.perPage),e.Promise.resolve(u));var a=(n.page||1)*(n.perPage||0);return o.length&&(s.fetchedEnd||o.length>=a)?e.Promise.resolve(o):s.getPage(n)},function(t){e.Flog.error("photo-list-view: error fetching model ("+t+")")}).then(function(n){var i=t.get("collectionModel").getValue(t.modelParams.collectionAttributeName),s=i.getList(),o=i.getFirstItem(),u=i.getLastItem();return!n||!n.length?e.Promise.resolve(null):(t.lastPageInView?(t.lowestPageInView=t.pageParams.page,r===t.lastPageInView?t.highestPageInView=r-(Math.floor(t.pageParams.viewPageSize/t.pageParams.perPage)-1):t.highestPageInView=Math.max(t.lowestPageInView,r)):(t.lowestPageInView=Math.floor(o.index/t.pageParams.perPage)+1,t.highestPageInView=Math.floor(u.index/t.pageParams.perPage)+1),!YUI.Env.isServer&&t.scrollInterruptState&&t.updateScrollInterruptState(t.highestPageInView-1),i.fetchedEnd&&n.length&&s.length&&n[n.length-1]&&s[s.length-1]&&n[n.length-1].id===s[s.length-1].id?t.lastItemCached=!0:t.highestPageInView>=t.lastPageInView&&(t.lastItemCached=!0),t.itemFilterFunction&&typeof t.itemFilterFunction=="function"&&(n=n.filter(t.itemFilterFunction)),t.layOutItems(n,"bottom"))},function(t){e.Flog.error("photo-list-view: Calculate layout and generate subviews ("+t+")")}).then(this.loadStateSubviewsReady.bind(this),function(n){e.Flog.warn("Error loading items from registry:",t.modelParams.registryName,"with id:",t.modelParams.modelIdOrAttributes," error:",n)}))},loadStateSubviewsReady:function(e){var t=0,n=this.photoListLayout.getAwakeItems().length;YUI.Env.isServer||(this.measureAFT&&this.appContext.hasClientSideRouted()&&e&&e.length&&e.forEach(function(e){e.once("loaded",function(r){this.aftCache[e.get("id")]=(new Date).getTime(),++t>=n&&this.reportAFTResults()}.bind(this))}.bind(this)),this.get("container").hasClass("requiredToShowOnServer")&&this.photoListLayout.containerWidth!==this.retrieveContainerWidth()&&(this._relayoutQueued=!0))},buildContainer:function(){return this.setContainerHTML(""),this.get("container").setStyle("height",this.containerHeight+"px"),this.initialLayoutResponse&&(this.renderSubviews(null,this.initialLayoutResponse),delete this.initialLayoutResponse),this},buildHeadContainer:function(){if(!YUI.Env.isServer)return this;var e,t,n=this;return this.measureAFT&&(e=Object.keys(this.subviewsById).map(function(e){return t=n.subviewsById[e],{id:e,url:t.get("photoUrl")}}),this.set("headContainer",this.templates("photo-list-aft")({photolistId:this.getAFTTimingKey(),photos:e}))),this},activate:function(){var t;this._relayoutQueued&&(this._relayoutQueued=!1,this.initialLayoutResponse?(this.buildContainer(),this.storeContainerWidth(this.photoListLayout.containerWidth)):this.handleResize(null));if(this.paginateOnScroll||!this.keepAwakeOnScroll)this.handleScroll(),this.parentContainer!==e.config.win&&this.parentContainer instanceof e.Node?this.registerEventHandler(this.parentContainer.on("scroll",this.handleScroll.bind(this))):this.registerEventHandler(e.globalEvents.subscribe("window:scroll",this.handleScroll.bind(this)));return this.relayoutOnResize&&this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.handleResize.bind(this))),!YUI.Env.isServer&&this.maintainScrollPosition?this.photoListLayout.hasLimitedNumberOfRows()||(t=this.appContext.getReferrer(),(!t||t&&t!==this.appContext.flapp.getPath())&&this.restoreScrollPosition()):!YUI.Env.isServer&&this.scrollToWithId&&this.scrollToId(this.scrollToWithId),this.injectPhotolistContextParams&&this.registerEventHandler(this.get("container").delegate("click",this.injectPhotolistContext.bind(this),"a")),this.registerEventHandler(this.get("container").delegate("click",this.subviewExtraToolClicked.bind(this),".extra-tool")),Object.keys(this.subviewMapping).some(function(e){return this.subviewMapping[e]&&this.subviewMapping[e].name==="photo-list-tile-view"}.bind(this))&&this.registerEventHandler(this.get("container").delegate("mouseenter",this.subviewLicenseMouseenter.bind(this),".license")),this.measureAFT&&this.reportAFTResults(),this.handleCollectionChanged&&this.registerEventHandler(this.get("collectionModel").on("valuesChanged",this.onCollectionModelValuesChanged.bind(this))),this.activateSubviews(),this},setItems:function(e){var t=this,n;return this.containerHeight=0,this.itemsMappedToAspectRatios=[],this.modelsById={},this.subviewsById={},this.get("collectionModel")&&(n=this.get("collectionModel").getValue(this.modelParams.collectionAttributeName),n.fetchedStart?this.firstItemCached=!0:this.firstItemCached=!1,n.fetchedEnd?this.lastItemCached=!0:this.lastItemCached=!1),this.get("container").setHTML(""),this.photoListLayout.clear(),this.get("showThrobberDuringLoad")&&this.toggleThrobber(!0),this.layOutItems(e,"bottom").then(function(e){t.get("showThrobberDuringLoad")&&t.toggleThrobber(!1)})},getContainingElementData:function(){var t,n=this.get("container");return t={height:0,scrollLeft:0,scrollTop:0},this.parentContainer!==e.config.win&&this.parentContainer instanceof e.Node?t={height:this.parentContainer.get("offsetHeight"),scrollLeft:this.parentContainer.getDOMNode().scrollLeft,scrollTop
:this.parentContainer.getDOMNode().scrollTop}:t={height:this.appContext.viewportData.getHeight(),scrollLeft:YUI.Env.isServer?0:e.config.win.pageXOffset,scrollTop:YUI.Env.isServer?0:e.config.win.pageYOffset},n&&(t.scrollLeft-=n.get("offsetLeft"),t.scrollTop-=n.get("offsetTop")),t},setContainerScrollTop:function(t){this.parentContainer!==e.config.win&&this.parentContainer instanceof e.Node?this.parentContainer.getDOMNode().scrollTop=t:e.config.win.scrollTo(0,t)},setTargetRowHeight:function(e){return this.photoListLayout.updateTargetRowHeight(e),this.handleResize(null,!0)},getSubview:function(e){return this.subviewsById[e]},handleScroll:function(t){var n=this,r=this.get("container"),i=r.get("clientHeight"),s=r.get("offsetParent").get("offsetTop")-r.get("offsetTop")+i,o,u=this.getContainingElementData(),a=u.height,f=u.scrollTop,l=f+a,c=!0;for(var h in this.subviewsById){c=!1;break}if(c)return;this.paginateOnScroll&&(!this.scrollInterruptState||!this.scrollInterruptState.isInterrupted)&&((!this.lastPageInView||this.highestPageInView<this.lastPageInView)&&s-l<this.loadMoreMargin*a&&this.loadMore("bottom"),!this.lastPageInView&&f<this.loadMoreMargin*a&&this.lowestPageInView>1&&this.loadMore("top")),this.keepAwakeOnScroll||(o=this.photoListLayout.computeWakeSleep(u.scrollTop,u.scrollLeft),this.wakeOrSleepSubviews(o.wakeSleepChangedItems),!YUI.Env.isServer&&this.viewBeaconer&&o.inViewportChangedItems&&this.processInViewportItems(o.inViewportChangedItems)),t!==undefined&&(this.afterScrollTimeoutId&&e.config.win.clearTimeout(this.afterScrollTimeoutId),this.afterScrollTimeoutId=e.config.win.setTimeout(function(){n.paginateOnScroll&&n.storeScrollPosition(),n.paginateOnScroll&&!n.keepAwakeOnScroll&&n.validateWakeSleep(o),delete n.afterScrollTimeoutId},250))},handleResize:function(e,t){this.responsiveRowHeight&&this.adjustRowHeightToContainerWidth();var n=this.calculateContainerWidth(),r=this.get("container"),i=this.getContainingElementData(),s,o,u={diffType:"relayout",firstPage:this.firstItemCached,lastPage:this.lastItemCached};if(!t&&n-this.scrollbarWidth===this.photoListLayout.containerWidth)return;return this.storeContainerWidth(n),this.photoListLayout.containerWidth=n-this.scrollbarWidth,s=this.photoListLayout.computeLayout(null,i.scrollTop,i.scrollLeft,u),this.containerHeight=s.containerHeight,this.scrollInterruptState&&this.scrollInterruptState.isInterrupted&&this.scrollInterruptState.loadMoreElement&&this.scrollInterruptState.loadMoreElement.setStyle("width",this.photoListLayout.containerWidth+"px"),r.setStyle("height",s.containerHeight+"px"),o=this.updateSubviews(s,"bottom"),this.recenterOnResize&&this.scrollToCenterItem(s.allLayoutItems),o},loadMore:function(t){var n=this,r=this.get("collectionModel"),i=r.getValue(this.modelParams.collectionAttributeName),s=i.getList(),o=e.merge(this.modelParams.fetchParams,this.pageParams);if(t==="bottom"&&!this.loadingMoreBottom){this.fetchedOnlyInitPage?(o.page=(this.pageParams.page-1)*2+2,o.perPage=Math.floor(.5*this.pageParams.perPage)):o.page=this.highestPageInView+1;if(i.fetchedEnd&&this.lastItemCached)return;this.loadingMoreBottom=!0,this.scrollInterruptParams&&this.scrollInterruptParams.footerToHideWhileScrolling&&!this.scrollInterruptState.footer&&(this.scrollInterruptState.footer=e.one(this.scrollInterruptParams.footerToHideWhileScrolling),this.scrollInterruptState.footer&&(this.scrollInterruptState.footerHeight=this.scrollInterruptState.footer.get("clientHeight"),this.setFooterDisplay(!1))),this.get("showThrobberDuringLoad")&&this.toggleThrobber(!0),i.getPage(o).then(function(r){s=i.getList(),i.fetchedEnd&&r[r.length-1].id===s[s.length-1].id&&(n.lastItemCached=!0),n.fetchedOnlyInitPage?n.fetchedOnlyInitPage=!1:(o.perPageDoubling&&n.perPageDoubles<o.perPageDoubling&&(n.perPageDoubles++,n.pageParams.perPage*=2,n.highestPageInView=Math.floor(.5*n.highestPageInView),n.lastPageInView=Math.floor(.5*n.lastPageInView)),n.highestPageInView=n.highestPageInView+1),n.highestPageInView>=n.lastPageInView&&(n.lastItemCached=!0),n.itemFilterFunction&&typeof n.itemFilterFunction=="function"&&(r=r.filter(n.itemFilterFunction)),n.layOutItems(r,t).then(function(t){n.loadingMoreBottom=!1,n.paginateOnScroll&&(i.totalItems&&(o.page-1)*o.perPage>i.totalItems?e.Flog.warn("[photo-list-view]","loadMore fetching beyond end of collection; aborting:",o,"total:"+i.totalItems):n.handleScroll())}),n.scrollInterruptState&&(n.lastItemCached?n.setFooterDisplay(!0):(n.scrollInterruptState.numPagesLoaded++,n.checkScrollInterruptionState())),n.get("showThrobberDuringLoad")&&n.toggleThrobber(!1)},function(t){e.Flog.error("[photo-list-view]","loadMore page fetch failed:",t.message),n.toggleThrobber(!1)})}else t==="top"&&!this.loadingMoreTop&&(o.page=this.lowestPageInView-1,n.lowestPageInView>1&&(this.loadingMoreTop=!0,i.getPage(o).then(function(r){i=i,i.fetchedStart&&r[0].id===i.getList()[0].id&&(n.firstItemCached=!0),n.lowestPageInView=n.lowestPageInView-1,n.layOutItems(r,t).then(function(t){n.loadingMoreTop=!1,n.paginateOnScroll&&(o.page<=0?e.Flog.warn("[photo-list-view]","loadMore fetching beyond start of collection; aborting:",o):n.handleScroll())})},function(t){e.Flog.error("[photo-list-view]","loadMore page fetch failed:",t.message),n.toggleThrobber(!1)})))},layOutItems:function(t,n,r){if(!t||!t.length)return e.Promise.resolve();var i=this.containerHeight,s,o,u={},a,f=this.get("container"),l=this.getContainingElementData();t=this.cacheModelsById(t),s=this.itemsToAspectRatios(t);if(n==="bottom")this.itemsMappedToAspectRatios=this.itemsMappedToAspectRatios.concat(s),o=s,u.diffType="append",this.lastItemCached&&(u.lastPage=!0);else{if(n!=="top"){e.Flog.warn('Unsupported `layOutItems` direction: "'+n+'".');return}this.itemsMappedToAspectRatios=s.concat(this.itemsMappedToAspectRatios),o=s,u.diffType="prepend",this.firstItemCached&&(u.firstPage=!0)}return r&&(u.diffType="relayout",u.diffDirection=n),a=this.photoListLayout.computeLayout(o,l.scrollTop,l.scrollLeft,u),f.setStyle("height",a.containerHeight+"px"
),this.containerHeight=a.containerHeight,n==="top"&&this.setContainerScrollTop(this.containerHeight-i),this.updateSubviews(a,n)},updateSubviews:function(t,n){var r=this,i;return this.instantiateSubviews(t.newItems).then(function(e){return e=e.filter(function(e){return!!e}),r.updateSubviewGeometry(t.layoutChangedItems),r.isBuilt?(r.renderSubviews(e,t,n),r.activateSubviews(e),t.wakeSleepChangedItems.length&&(i=t.wakeSleepChangedItems.filter(function(e){return t.newItems.indexOf(e)===-1}),i.length&&r.wakeOrSleepSubviews(i)),t.inViewportChangedItems.length&&r.processInViewportItems(t.inViewportChangedItems)):r.initialLayoutResponse=t,e},function(t){e.Flog.error("[photo-list-view] Error instantiating subviews: ",t)})},instantiateSubviews:function(t){var n,r=[],i=this,s=this.get("container");t.forEach(function(t){n=i.modelsById[t.id];if(!n){e.Flog.warn("Model missing from cache at id:",t.id);return}i.subviewsById[t.id]?r.push(e.when(i.subviewsById[t.id])):r.push(function(n,r){var o=e.merge(i.params,{id:t.id,parentSignature:i.getPhotolistSignature(),model:n,contextSuffix:i.contextSuffix,layoutItem:r,parentContainer:s,interactionViewName:i.interactionViewName,engagementModelName:i.engagementModelName,measureAFT:i.measureAFT}),u=i.subviewMapping[n.registry.name];return u.params&&(o=e.merge(o,u.params),o.removePoolPhoto&&(o.listModelParams=i.modelParams)),i.instantiateSubview(u.name,o).then(function(t){return t.initialize().then(function(e){return i.subviewsById[r.id]=e,i.subviews={},e},function(t){return e.Flog.warn('Error in lifecycle of subview "'+u.name+'":',t),i.photoListLayout.invalidateItem(r.id),null})},function(t){e.Flog.warn('Error instantiating subview "'+u.name+'":',t)})}(n,t))});var o=e.Promise.all(r);return o.then(function(e){return!YUI.Env.isServer&&i.viewBeaconer&&i.viewBeaconer.beaconer.flushQueue({avoidDuplicates:!0}),e}),o},renderSubviews:function(t,n,r){var i,s=this.get("container"),o,u,a,f=this;t||(t=[],n.allLayoutItems.forEach(function(e){var n=f.subviewsById[e.id];n&&t.push(n)})),r||(r="bottom"),YUI.Env.isServer?(i=t.map(function(e){return e.get("container").get("outerHTML")}),r==="top"?s.setHTML(i.join("")+s.getHTML()):r==="bottom"?s.setHTML(s.getHTML()+i.join("")):(e.Flog.warn('Unsupported `renderSubviews` direction: "'+r+'"; appending changed subviews.'),s.setHTML(s.getHTML()+i.join("")))):(r==="top"&&t.reverse(),o=YUI.config.doc.createDocumentFragment(),t.forEach(function(e){e&&o.appendChild(e.get("container").getDOMNode())}),r==="top"?s.prepend(o):r==="bottom"?s.append(o):(e.Flog.warn('Unsupported `renderSubviews` direction: "'+r+'"; appending changed subviews.'),s.append(o))),u=n.wakeSleepChangedItems.filter(function(e){return n.newItems.indexOf(e)!==-1}),this.updateSubviewGeometry(u),this.keepAwakeOnScroll?(a=n.wakeSleepChangedItems.filter(function(e){return n.leadingOrphans.indexOf(e)!==-1||n.trailingOrphans.indexOf(e)!==-1}),u.forEach(function(e){e.isAwake=!0}),this.wakeOrSleepSubviews(u.concat(a))):this.wakeOrSleepSubviews(n.wakeSleepChangedItems)},updateSubviewGeometry:function(t){var n,r=this;t.forEach(function(t){n=r.subviewsById[t.id],n?n.updateGeometry?n.updateGeometry(t):n.get("container").setStyles({width:t.geometry.width+"px",height:t.geometry.height+"px",transform:"translate("+t.geometry.left+"px, "+t.geometry.top+"px)","-webkit-transform":"translate("+t.geometry.left+"px, "+t.geometry.top+"px)","-ms-transform":"translate("+t.geometry.left+"px, "+t.geometry.top+"px)"}):e.Flog.warn("Subview missing from cache for geometry update at id:",t.id)})},wakeOrSleepSubviews:function(t){var n,r=this;t.forEach(function(t){n=r.subviewsById[t.id],n?n.wake&&n.sleep?t.isAwake?n.wake():n.sleep():n.get("container").setStyle("display",t.isAwake?"":"none"):e.Flog.warn("Subview missing from cache for wake/sleep update at id:",t.id)})},processInViewportItems:function(t){var n,r=this;t.forEach(function(t){if(t.isInViewport){n=r.subviewsById[t.id];if(!n)return;!YUI.Env.isServer&&r.viewBeaconer&&r.viewBeaconer.beaconer&&(n.get("model").getValue(r.viewBeaconer.beaconIsOwnerAttribute)||(r.viewBeaconer.beaconAlwaysBeacon||!n.get("model").getValue(r.viewBeaconer.beaconRestrictedAttribute))&&r.viewBeaconer.beaconer.queue(n.get("model").getValue(r.viewBeaconer.beaconAttribute),e.config.win.document.location.href))}})},activateSubviews:function(e){if(!e){e=[];for(var t in this.subviewsById)e.push(this.subviewsById[t])}e.forEach(function(e){e.normalizedActivate()})},removeItems:function(e){var t=this;e.forEach(function(e){t.photoListLayout.invalidateItem(e.id),t.itemsMappedToAspectRatios=t.itemsMappedToAspectRatios.filter(function(t){return t.id!==e.id}),t.modelsById[e.id]&&delete t.modelsById[e.id],t.subviewsById[e.id]&&(t.subviewsById[e.id].destroy({remove:!0}),delete t.subviewsById[e.id])})},onCollectionModelValuesChanged:function(e,t){var n,r,i,s,o;if(e[this.modelParams.collectionAttributeName]&&e[this.modelParams.collectionAttributeName].listDiff){n=e[this.modelParams.collectionAttributeName].listDiff;if(n&&!this.loadingMoreBottom&&!this.loadingMoreTop){r=this.get("collectionModel").getValue(this.modelParams.collectionAttributeName),i=r.getList();if(n.added.length){var u,a,f,l;s=n.added,u=i.indexOf(s[0])-1,u!==-1&&(a=i[u],a&&this.modelsById[a.id]&&(o="bottom",r.fetchedEnd&&s[s.length-1].id===i[s.length-1].id&&(this.lastItemCached=!0))),f=i.indexOf(s[s.length-1])+1,f!==-1&&(l=i[f+1],l&&this.modelsById[l.id]&&(o="top",r.fetchedStart&&s[0].id===i[0].id&&(this.firstItemCached=!0))),o&&this.layOutItems(s,o,t)}n.removed.length&&(this.removeItems(n.removed),this.handleResize(null,!0))}}},toggleThrobber:function(e){var t=100,n=this.get("container");e===undefined&&(e=!this.get("isThrobberShowing")),e?(n.setStyle("height",this.containerHeight+t+"px"),this.get("throbberNode").appendTo(n)):this.get("throbberNode").remove(),this._set("isThrobberShowing",e)},checkScrollInterruptionState:function(e){if(!this.scrollInterruptState&&!e)return;var t;if(this.scrollInterruptState.numPagesLoaded>=this.scrollInterruptState
.nextInterrupt){this.scrollInterruptState.numInterrupts++,t=this.scrollInterruptParams.pageCounts[this.scrollInterruptParams.pageCounts.length-1];if(this.scrollInterruptState.numInterrupts>=this.scrollInterruptParams.pageCounts.length)switch(this.scrollInterruptParams.repeatMode){case"exponential":this.scrollInterruptState.nextInterrupt+=t*Math.pow(2,this.scrollInterruptState.numInterrupts-this.scrollInterruptParams.pageCounts.length);break;case"linear":default:this.scrollInterruptState.nextInterrupt+=t}else this.scrollInterruptState.nextInterrupt+=this.scrollInterruptParams.pageCounts[this.scrollInterruptState.numInterrupts];e||this.interruptScroll()}else this.get("container").setStyle("paddingBottom","0px")},updateScrollInterruptState:function(e){this.scrollInterruptState.numPagesLoaded=e;for(var t=0;t<=e;t++)this.checkScrollInterruptionState(!0)},interruptScroll:function(){if(this.scrollInterruptState.isInterrupted)return;this.scrollInterruptState.isInterrupted=!0,this.scrollInterruptState.loadMoreElement||(this.scrollInterruptState.loadMoreElement=e.Node.create(this.templates("infinite-scroll-load-more")({}))),this.get("container").append(this.scrollInterruptState.loadMoreElement),this.scrollInterruptState.loadMoreElementHeight||(this.scrollInterruptState.loadMoreElementHeight=parseInt(this.scrollInterruptState.loadMoreElement.getComputedStyle("height").replace("px",""),10)+20,this.registerEventHandler(this.scrollInterruptState.loadMoreElement.on("click",this.onLoadMoreClicked.bind(this))),this.scrollInterruptState.loadMoreElement.setStyles({width:this.photoListLayout.containerWidth+"px",bottom:this.photoListLayout.containerPadding.bottom+"px"})),this.setFooterDisplay(!0),this.get("container").setStyle("paddingBottom",this.scrollInterruptState.loadMoreElementHeight+"px")},onLoadMoreClicked:function(t){var n=100,r=e.config.win.pageYOffset,i;if(!this.scrollInterruptState.isInterrupted)return;this.scrollInterruptState.isInterrupted=!1,this.scrollInterruptState.loadMoreElement.remove(),this.setFooterDisplay(!1),this.get("container").setStyle("paddingBottom",this.scrollInterruptState.footerHeight+this.scrollInterruptState.loadMoreElementHeight-n+"px"),this.loadMore("bottom"),i=e.config.win.pageYOffset,e.config.win.scrollBy(0,r-i)},setFooterDisplay:function(e){if(!this.scrollInterruptState.footer)return;e?this.scrollInterruptState.footer.removeClass("infinite-scroll-hide-footer"):this.scrollInterruptState.footer.addClass("infinite-scroll-hide-footer"),this.fire("subviewViewEvent","footerDisplayChanged")},cacheModelsById:function(e){if(!e||!e.length)return;var t=this.modelsById,n=[];return e.forEach(function(e){e&&!t[e.id]&&(t[e.id]=e,n.push(e))}),n},itemsToAspectRatios:function(e){var t=[],n=this.photoListLayout.forceAspectRatio,r=typeof n!="undefined"&&!isNaN(n),i=n||1;return e.forEach(function(e){typeof e!="undefined"&&t.push({id:e.id,aspectRatio:r?i:e.getValue("aspectRatio")})}),t},calculateContainerWidth:function(t){t||(t=this.explicitContainerWidth);if(typeof t=="number")return t;var n,r;switch(t){case"previousContainerWidth":r=this.getContainerWidthFromCache();break;case"fullWidth":default:if(!YUI.Env.isServer)if(this.isActiveAndInDOM())r=this.get("container").get("clientWidth")-this.scrollbarWidth;else{n=this.get("container");if(!this.isBuilt||!n)n=e.one("."+this.parentName);n&&(r=parseInt(n.getStyle("width")))}r||(r=this.getContainerWidthFromCache())}return r},getContainerWidthFromCache:function(){var e;return e=this.retrieveContainerWidth(),e||(e=this.appContext.viewportData.getWidth()-this.scrollbarWidth),this._relayoutQueued=!0,e},adjustRowHeightToContainerWidth:function(e){e=this.calculateContainerWidth(e);var t,i,s,o,u;if(e<r[0])i=this.baseRowHeight*n[r[0]];else if(e>r[r.length-1])i=this.baseRowHeight*n[r[r.length-1]];else for(u=0;u<r.length-1;u++){s=r[u],o=r[u+1],t=(e-s)/(o-s);if(t>=0&&t<=1){i=this.baseRowHeight*n[s]+t*this.baseRowHeight*(n[o]-n[s]);break}}this.photoListLayout.targetRowHeight=i},storeContainerWidth:function(e){var t=this.parentName;if(!t)return;this.appContext.viewportData.setContainerWidth(t,e)},retrieveContainerWidth:function(){var e=this.parentName;return e?this.appContext.viewportData.getContainerWidth(e):0},getLayoutItemsOnScreen:function(e){if(YUI.Env.isServer)return[];var t=this.get("container"),n,r,i=this.getContainingElementData();n=i.scrollTop-t.getXY()[1],r=n+i.height;if(!e){e=this.photoListLayout.getCurrentLayout();if(!e)return[]}return e.filter(function(e){return e.geometry.top+e.geometry.height>n&&e.geometry.top<r})},scrollToCenterItem:function(t){if(this.photoListLayout.hasLimitedNumberOfRows())return;if(this.getContainingElementData().scrollTop===0)return;var n=this.photoListLayout.getCurrentLayout(),r=this.get("container").getXY()[1],i,s=this;this.layoutItemAtScreenCenter||(i=this.getLayoutItemsOnScreen(n),this.layoutItemAtScreenCenter=i[Math.floor(.5*i.length)]),t.some(function(t){if(t.id===s.layoutItemAtScreenCenter.id)return s.parentContainer!==e.config.win&&s.parentContainer instanceof e.Node?s.parentContainer.getDOMNode().scrollTop=r+t.geometry.top+.5*(t.geometry.height-s.parentContainer.get("offsetHeight")):e.config.win.scrollTo(0,r+t.geometry.top+.5*(t.geometry.height-s.appContext.viewportData.getHeight())),!0}),this.deleteResizeCenterTimeoutId&&e.config.win.clearTimeout(this.deleteResizeCenterTimeoutId),this.deleteResizeCenterTimeoutId=e.config.win.setTimeout(function(){if(!s.layoutItemAtScreenCenter)return;delete s.layoutItemAtScreenCenter,delete s.deleteResizeCenterTimeoutId},1e3)},storeScrollPosition:function(){var t=this.getLayoutItemsOnScreen();t.length&&e.StorageHelper.setItem(this.getPhotolistSignature(),t[0].id,!0)},restoreScrollPosition:function(){this.scrollToId(null,!0)},scrollToId:function(t,n){var r,i,s=this.get("container");t||(t=e.StorageHelper.getItem(this.getPhotolistSignature(),!0)),r=this.photoListLayout.getLayoutItem(t);if(!r)return;if(!r.geometry||r.geometry.top-this.photoListLayout.containerPadding.top<=0)return;i=
s.get("offsetParent")?s.get("offsetParent").get("offsetTop")+s.get("offsetTop"):s.get("offsetTop"),e.one(".global-nav-view")&&!n&&(i-=e.one(".global-nav-view").get("offsetHeight")),e.one(".fluid-subnav")&&!n&&(i-=e.one(".fluid-subnav").get("offsetHeight")),n&&(i+=50),this.setContainerScrollTop(r.geometry.top+i)},validateWakeSleep:function(e){var t=this.photoListLayout.getAwakeItems(),n=e.allLayoutItems.indexOf(t[0]),r=e.allLayoutItems.indexOf(t[t.length-1]),i,s,o,u,a=[];for(i=n;i<r;i++){s=e.allLayoutItems[i],o=this.subviewsById[s.id];if(!o)continue;u=!s.isAwake,u||(o.isAwake?u=!o.isAwake():u=o.get("container").get("children").size()===0),u&&(s.isAwake=!0,a.push(s))}a.length&&this.wakeOrSleepSubviews(a)},getPhotolistSignature:function(){var t,n,r,i=0;if(!this.signature){if(!YUI.Env.isServer)t=e.config.win.location.pathname+decodeURIComponent(e.config.win.location.search);else{t=this.appContext.request.path;if(this.appContext.request.query)for(n in this.appContext.request.query)t+=n+this.appContext.request.query[n]}t=e.flutil.normalizeURIComponents(t);if(this.modelParams)if(typeof this.modelParams.modelIdOrAttributes!="string")for(n in this.modelParams.modelIdOrAttributes)t+=n+""+this.modelParams.modelIdOrAttributes[n];else t+=this.modelParams.modelIdOrAttributes;this.parentName&&(t+=this.parentName),t=t.toLowerCase(),t=t.replace(/\W/g,"");for(r=0;r<t.length;r++)i+=t.charCodeAt(r);this.signature="photolist-"+i.toString(36)}return this.signature},injectPhotolistContext:function(t){var n=t.currentTarget.getAttribute("href"),r=e.URLHelper.PHOTOPAGE_PATTERN.exec(n),i,s,o,u,a,f,l;if(r&&r.length>=5){i=this.get("collectionModel").getValue(this.modelParams.collectionAttributeName).getList().map(function(e){return e.id}).filter(function(e){return!!e}),u=r[4],a=i.indexOf(u);if(a===-1){e.Flog.warn("Clicked photo id not found in photolist. Aborting photolist injection and passing through to photopage.");return}s=i.slice(a,a+50),s.length<50&&(o=Math.max(0,a-(50-s.length)),s=i.slice(o,a).concat(s)),n.substr(-1)==="/"&&(n=n.substr(0,n.length-1)),f=n+"/in/photolist-"+e.URLHelper.generateShortenedPhotolist(s),t.halt(),this.injectPhotolistContextParams&&this.injectPhotolistContextParams.rapidBeaconConfig&&(l={},l[this.injectPhotolistContextParams.rapidBeaconConfig.itemIndexKey]=a+1,e.rapidTracker.beacon(this.name,this.injectPhotolistContextParams.rapidBeaconConfig.beaconName,l)),t.metaKey||t.ctrlKey||t.which&&t.which===2?e.config.win.open(f,"_blank"):this.appContext.flapp.navigate(f)}},subviewExtraToolClicked:function(t){var n=t.target.getDOMNode(),r=n.dataset.id,i=this.modelsById[r];if(!r||!i)return;if(n.classList.contains("more-menu")){var s=[],o=n.dataset.menuItems.split(",");o&&~o.indexOf("exclude-people")&&s.push({text:this.intlMessage({intlName:"common.HIDE_PHOTOS_FROM_PERSON"}),callback:function(){this.fire("subviewViewEvent","bigScotch",i.getValue("ownerNsid"),r)}.bind(this)}),s.length&&this.openSubviewMenu(t.target,s,this.subviewsById[r])}else n.classList.contains("remove-photo")?(this.fire("subviewViewEvent","photoList:removePhoto",r),n.classList.contains("remove-fave")?this.appContext.getModelRegistry(this.engagementModelName).then(function(t){return t.remoteDelete({photoId:r,userId:this.modelParams.modelIdOrAttributes.id||this.modelParams.modelIdOrAttributes}).then(function(e){this.get("collectionModel").getValue(this.modelParams.collectionAttributeName).remove(i)}.bind(this),function(t){(new e.Views.FluidModal({appContext:this.appContext,title:this.intlMessage({intlName:"common.OOPS"}),showActionButton:!0,showCancelButton:!1,textMessage:this.intlMessage({intlName:"common.PHOTO_REMOVE_ERROR"})})).show()}.bind(this))}.bind(this)):n.classList.contains("remove-group-pool")&&this.get("collectionModel").removePhotoRemote(r).then(function(e){this.get("collectionModel").getValue(this.modelParams.collectionAttributeName).remove(i)}.bind(this),function(t){(new e.Views.FluidModal({appContext:this.appContext,title:this.intlMessage({intlName:"common.OOPS"}),showActionButton:!0,showCancelButton:!1,textMessage:this.intlMessage({intlName:"common.PHOTO_REMOVE_ERROR"})})).show()}.bind(this))):n.classList.contains("big-scotch")&&this.fire("subviewViewEvent","scotch:big",i.getValue("ownerNsid"),r);t.halt()},openSubviewMenu:function(t,n,r){var i=new e.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,observePageResize:!0,anchorElement:t,positionFixed:!1,preferBottom:!0,dismissOnOverlayClick:!0,closeOnScroll:!0,menuItems:n}),s,o,u,a,f,l=this;this.registerEventHandler(i.on("selected",function(e){e&&e.menuItem&&e.menuItem.callback&&e.menuItem.callback(e.menuItem.selected)})),f=i.on("closeDroparound",function(e){l.detachRegisteredEvent(f),l.detachRegisteredEvent(s),l.detachRegisteredEvent(o),u&&clearTimeout(u),r.setHoverVisible&&r.setHoverVisible(!1)}),this.registerEventHandler(f),i.show(),s=i.get("container").on("mouseleave",function(e){if(!i)return;var t=r.get("container");if(!t)return;var n=t.getDOMNode().getBoundingClientRect();(e.clientX<n.left||e.clientX>n.right||e.clientY<n.top||e.clientY>n.bottom)&&i.close()}),this.registerEventHandler(s),o=e.one("document").on("mousemove",e.betterThrottle(function(e){u&&clearTimeout(u),u=setTimeout(function(){a(e)},200)})),this.registerEventHandler(o),a=function(e){if(!i)return;var t=i.getDroparoundContainer(),n=r.get("container");if(!n||!t)return;var s=n.getDOMNode().getBoundingClientRect(),o=t.getDOMNode().getBoundingClientRect();(e.clientX<s.left||e.clientX>s.right||e.clientY<s.top||e.clientY>s.bottom)&&!(e.clientX>o.left&&e.clientX<o.right&&e.clientY>o.top&&e.clientY<o.bottom)&&i.close()},r.setHoverVisible&&r.setHoverVisible(!0)},subviewLicenseMouseenter:function(t){var n=t.currentTarget&&t.currentTarget.getData("license-type")&&t.currentTarget.getData("license-type").toString(),r;if(!n)return;this.licenseTooltipHoverTimer&&clearTimeout(this.licenseTooltipHoverTimer),this.licenseTooltip&&this.licenseTooltip.close(),this.licenseTooltipHoverTimer=setTimeout(function(
){this.licenseTooltip=new e.Views.FluidDroparound({appContext:this.appContext,anchorElement:t.target,showDropArrow:!0,positionFixed:!1,preferBottom:!0,invisibleOverlay:!0,autoSizeToContent:!0,width:300,classList:"license-tooltip",htmlMessage:this.templates("license-detail")({title:"common.LICENSE_TITLE_"+n,body:"common.LICENSE_DESC_"+n})}),this.licenseTooltip.show()}.bind(this),i),r=this.get("container").delegate("mouseleave",function(e){this.licenseTooltip.close(),r.detach(),clearTimeout(this.licenseTooltipHoverTimer)}.bind(this),".license"),this.registerEventHandler(r)},reportAFTResults:function(){var e=this.appContext.hasClientSideRouted(),t,n,r=0;if(e)t=this.aftCache;else{if(!window.paftTiming)return;t=window.paftTiming[this.getAFTTimingKey()]}for(n in t)this.photoIsAboveTheFold(n)&&(r=Math.max(r,t[n]));this.fire("subviewViewEvent","atfVisible",r,this.getAFTTimingKey())},getAFTTimingKey:function(){return this.parentName||this.getPhotolistSignature()},photoIsAboveTheFold:function(e){if(YUI.Env.isServer)return!0;var t=this.subviewsById[e];return t?t.get("container").getXY()[1]<this.getContainingElementData().height:!1}},{ATTRS:{showThrobberDuringLoad:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)}},isThrobberShowing:{readOnly:!0,value:!1},throbberNode:{readOnly:!0,getter:function(t){return!YUI.Env.isServer&&t===undefined&&(t=e.Node.create('<div style="position: absolute; bottom: 40px; left: 0; right: 0;"><div class="flickr-dots"></div></div>'),this._set("throbberNode",t)),t}}}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-list-aft","hermes-template-infinite-scroll-load-more","hermes-template-license-detail","infinite-scroll-load-more-css","photo-list-layout","photo-list-photo-view","overflow-helper","storage-helper","attribute-helpers","url-helper","paged-collection","fluid-droparound-view","flog"],optionalRequires:["global-events"],langBundles:["common"]});
YUI.add("hermes-template-fluid-modal",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" html-modal"}function h(e,t){return" subview-modal"}function p(e,t){return'<div class="close-x"></div>'}function d(e,t){var r="",i;r+='\n		<div class="head">\n			',i=n["if"].call(e,e.navBarView,{hash:{},inverse:l.program(10,m,t),fn:l.program(8,v,t),data:t});if(i||i===0)r+=i;return r+='\n			<div class="extra"></div>\n		</div>\n	',r}function v(e,t){return'\n				<div class="nav"></div>\n			'}function m(e,t){var r="",i;r+='\n				<div class="title">\n					',i=n["if"].call(e,e.title,{hash:{},inverse:l.program(13,y,t),fn:l.program(11,g,t),data:t});if(i||i===0)r+=i;return r+="\n				</div>\n			",r}function g(e,t){var r="",i;return r+="\n						",(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n					",r}function y(e,t){var r="",i,s;return r+="\n						",s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlTitle,s):f.call(e,"renderTrustedMarkup",e.htmlTitle,s)))+"\n					",r}function b(e,t){return" lines"}function w(e,t){var r="",i;r+='\n			<div class="content text-only ',i=n["if"].call(e,e.noScroll,{hash:{},inverse:l.noop,fn:l.program(18,E,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.showFooter,{hash:{},inverse:l.noop,fn:l.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='">\n				',(i=n.textMessage)?i=i.call(e,{hash:{},data:t}):(i=e.textMessage,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n			</div>\n		",r}function E(e,t){return" no-scroll"}function S(e,t){return" has-footer"}function x(e,t){var r="",i,s;r+='\n			<div class="content html-only ',i=n["if"].call(e,e.noScroll,{hash:{},inverse:l.noop,fn:l.program(18,E,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.showFooter,{hash:{},inverse:l.noop,fn:l.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='">\n				',s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlMessage,s):f.call(e,"renderTrustedMarkup",e.htmlMessage,s)))+"\n			</div>\n		",r}function T(e,t){var r="",i;r+='\n			<div class="content subview ',i=n["if"].call(e,e.noScroll,{hash:{},inverse:l.noop,fn:l.program(18,E,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.showFooter,{hash:{},inverse:l.noop,fn:l.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='"></div>\n		',r}function N(e,t){var r="",i,s;r+='\n		<div class="foot">\n			',s=n["if"].call(e,(i=e.buttons,i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(27,C,t),data:t});if(s||s===0)r+=s;return r+="\n		</div>\n	",r}function C(e,t){var r="",i,s;r+='\n			<div class="buttons">\n				',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(28,k,t),data:t});if(s||s===0)r+=s;r+="\n				",s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.cancel),i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(33,O,t),data:t});if(s||s===0)r+=s;r+="\n				",s=n["if"].call(e,(i=e.buttons,i==null||i===!1?i:i.flavorText),{hash:{},inverse:l.noop,fn:l.program(35,M,t),data:t});if(s||s===0)r+=s;return r+="\n			</div>\n			",r}function k(e,t){var r="",i,s;r+='<button class="mini ',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.isDangerous),{hash:{},inverse:l.noop,fn:l.program(29,L,t),data:t});if(s||s===0)r+=s;r+=' action"',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.disabled),{hash:{},inverse:l.noop,fn:l.program(31,A,t),data:t});if(s||s===0)r+=s;return r+=">"+a((i=(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.label),typeof i===u?i.apply(e):i))+"</button>",r}function L(e,t){return"danger"}function A(e,t){return' disabled="disabled"'}function O(e,t){var n="",r;return n+='<button class="mini alt cancel">'+a((r=(r=(r=e.buttons,r==null||r===!1?r:r.cancel),r==null||r===!1?r:r.label),typeof r===u?r.apply(e):r))+"</button>",n}function M(e,t){var r="",i,s,o;r+='\n				<div class="flavor-text secondary',s=n.unless.call(e,(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(36,_,t),data:t});if(s||s===0)r+=s;return r+='">',o={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.text),o):f.call(e,"renderTrustedMarkup",(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.text),o)))+"</div>\n				",r}function _(e,t){return" hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;s+='<div class="modal',o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.subview,{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+=" ",(o=n.classList)?o=o.call(t,{hash:{},data:i}):(o=t.classList,o=typeof o===u?o.apply(t):o),s+=a(o)+'">\n	',o=n["if"].call(t,t.showCancelX,{hash:{},inverse:l.noop,fn:l.program(5,p,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n["if"].call(t,t.showHeader,{hash:{},inverse:l.noop,fn:l.program(7,d,i),data:i});if(o||o===0)s+=o;s+='\n	<div class="body',o=n["if"].call(t,t.showBodyLines,{hash:{},inverse:l.noop,fn:l.program(15,b,i),data:i});if(o||o===0)s+=o;s+='">\n		',o=n["if"].call(t,t.textMessage,{hash:{},inverse:l.noop,fn:l.program(17,w,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:l.noop,fn:l.program(22,x,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.subview,{hash:{},inverse:l.noop,fn:l.program(24,T,i),data:i});if(o||o===0)s+=o;s+="\n	</div>\n	",o=n["if"].call(t,t.showFooter,{hash:{},inverse:l.noop,fn:l.program(26,N,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials
):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-modal-view",function(e,t){"use strict";var n,r;n={css:{destinationContainer:"body",closeX:".close-x",buttonCancel:"button.cancel",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content"},options:{}},r={supportsTransform:!1,modal:{height:0,width:0}},e.namespace("Views").FluidModal=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.set("isActiveViewAgnostic",!0);var t=this.get("modalOverlayType");return this.alreadyShowingModal=t.alreadyShowingModal(),this.alreadyShowingModal||t.add(this),this},activate:function(){var t=this.get("container"),r=this;return this.get("showCancelX")&&this.registerEventHandler(t.one(n.css.closeX).on("click",e.bind(this.handleCancel,this))),this.get("showFooter")&&this.get("showCancelButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(n.css.buttonCancel).on("click",e.bind(this.handleCancel,this))),this.get("showFooter")&&this.get("showActionButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(n.css.buttonAction).on("click",e.bind(this.handleAction,this))),this.registerEventHandler(this.appContext.flapp.on("activeViewChange",function(e){r.close(e)})),this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(e){r.reposition()})),this.get("navBarView")&&r.get("navBarView").activate(),this.get("subview")&&(r.get("subview").activate(),r.registerEventHandler(r.get("subview").on("actionClick",e.bind(r.handleAction,r)))),this.fire("activated"),this},show:function(){return this.initialize().then(null,function(t){e.Flog.error("[fluid-modal-view] Error initializing modal: ",t)}),this.isClosed=!1,this.freeze(),e.fire("flickr:setKeyEventScope",this.getKeyEventScope()),this},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})},enableActionButton:function(){var e=this.get("container").one("button.action");e&&e.getAttribute("disabled")&&e.removeAttribute("disabled")},disableActionButton:function(){var e=this.get("container").one("button.action");e&&e.setAttribute("disabled",!0)},showFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.removeClass("hidden")},hideFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.addClass("hidden")},buildContainer:function(){if(!this.alreadyShowingModal){var t=this,i=e.one(n.css.destinationContainer),s;s={showCancelX:this.get("showCancelX"),title:this.get("title"),htmlTitle:this.get("htmlTitle"),navBarView:!!this.get("navBarView"),noScroll:this.get("noScroll"),textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),showBodyLines:this.get("showBodyLines"),hideModalOverlay:this.get("hideModalOverlay"),darkOverlay:this.get("darkOverlay"),showHeader:this.get("showHeader"),showFooter:this.get("showFooter"),buttons:{visible:this.get("showButtons"),action:{visible:this.get("showActionButton"),label:this.get("actionButtonLabel"),disabled:this.get("actionButtonDisabled"),isDangerous:this.get("actionButtonIsDangerous")},cancel:{visible:this.get("showCancelButton"),label:this.get("cancelButtonLabel")}},classList:this.get("classList")},this.get("buttonFlavorText")&&(s.buttons.flavorText={visible:this.get("showButtonFlavorText"),text:this.get("buttonFlavorText")}),this.setContainerHTML(this.templates("fluid-modal")(s)),r.modal.width=this.get("width"),r.modal.minWidth=this.get("minWidth"),r.modal.height=this.get("height"),this.get("navBarView")&&(this.get("navBarView").appContext=t.appContext,this.get("navBarView").initialize().then(function(e){e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(t.get("subview")&&e.details[0]==="navigation"?t.get("subview").fire.apply(t.get("subview"),["parentViewEvent"].concat(e.details)):t.get("subview")&&e.details[0]==="search"&&t.get("subview").fire.apply(t.get("subview"),["parentViewEvent"].concat(e.details)),t.fire.apply(t,e.details))}),t.get("container").one(n.css.navBarContent).appendChild(e.get("container")),t.get("subview")||t.activate()})),this.get("subview")?(this.get("subview").appContext=t.appContext,this.get("subview").set("isActiveViewAgnostic",!0),this.get("subview").initialize().then(function(e){t.on("parentViewEvent",function(t){t&&t.details&&t.details.length&&e.fire.apply(e,["parentViewEvent"].concat(t.details))}),e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(t.get("navBarView")&&e.details[0]==="backToList"&&t.get("navBarView").fire.apply(t.get("navBarView"),["parentViewEvent"].concat(e.details)),t.fire.apply(t,e.details))}),t.get("container").one(n.css.subviewContent).appendChild(e.get("container")),i&&(i.append(t.get("container")),t.reposition()),t.activate()},function(t){e.Flog.error("[fluid-modal-view] Error initializing modal subview: ",t)})):i&&(i.append(this.get("container")),this.reposition())}return this},reposition:function(){var t=this.get("container"),i=t.one(this.get("modalSelector")),s=e.one(e.config.win),o=parseInt(s.get("innerWidth"),10),u=parseInt(s.get("innerHeight"),10),a=r.modal.width?parseInt(r.modal.width,10):parseInt(i.getComputedStyle("width"),10),f,l=20,c={},h,p,d=i.one(".body"),v=0,m=this.get("showFooter")?parseInt(i.one(".foot").getComputedStyle("height"),10):0,g=0,y=parseInt(d.getComputedStyle("borderTopWidth"),10)+parseInt(d.getComputedStyle("borderBottomWidth"),10),b={};r.modal.height&&(v=parseInt(i.one(".head").getComputedStyle("height"),10),g=r.modal.height,i.get("showFooter")&&(m=parseInt(i.one(".foot").getComputedStyle("height"),10)),r.modal.height+v+m+4*l+y>=u&&(u<=700?g=u-v-m-y:g=u-v-m-4*l-y),i.setStyles({maxHeight:"none"}),this.get("fullWindow")?b.height=g+"px":this.get("maxHeight")&&(b.maxHeight=g+"px"),i.one(n.css.modalContent).setStyles(b)),f=parseInt(i.getComputedStyle("height"),10),h=i.getDOMNode().scrollHeight,p=i.getDOMNode
().scrollWidth,c={top:"50%",left:"50%",width:r.modal.width?a+"px":"",marginTop:-(f/2)+"px",marginLeft:-(a/2)+"px",minWidth:r.modal.minWidth?r.modal.minWidth+"px":""},f+2*l>u||h>f+1||a+2*l>o||p>a?(u<=700&&r.modal.height?c.maxHeight=u-10+"px":(c.maxHeight=u-2*l+"px",c.overflow="auto"),c.maxWidth=o-2*l+"px",c.marginTop=-(parseInt(c.maxHeight,10)/2)+"px",c.marginLeft=-(parseInt(c.maxWidth,10)/2)+"px"):(c.maxHeight="inherit",c.maxWidth="inherit",c.overflow="visible"),i.setStyles(c)},handleCancel:function(n){var r=this.get("subview");e.rapidTracker.beacon(t,"modalCancelClick"),r&&r.handleCancel&&r.handleCancel(),this.fire("cancelClick",n),this.close(n)},handleAction:function(e){var t=this.get("subview");this.fire("actionClick",e),t&&t.handleAction&&t.handleAction(),this.get("dismissOnActionClick")&&this.close(e)},close:function(t){e.fire("flickr:removeKeyEventScope",this.getKeyEventScope());var n=this.get("container");this.isClosed=!0,e.one("body").removeClass("scroll-fluid-modal"),this.get("subview")&&this.get("subview").destroy(),this.get("navBarView")&&this.get("navBarView").destroy(),n&&n.remove(!0),this.fire("close",t),this.destroy(),this.get("modalOverlayType").remove(this)},getKeyEventScope:function(){return this.name+this._yuid},destructor:function(){this.unfreeze(),this.detachAll()}},{ATTRS:{showCancelX:{value:!0},showCancelButton:{value:!0},showBodyLines:{value:!1},showActionButton:{value:!0},hideModalOverlay:{value:!1},darkOverlay:{value:!1},actionButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.OK"})}},actionButtonIsDangerous:{value:!1},cancelButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.CANCEL"})}},actionButtonDisabled:{value:!1},showButtons:{value:!0},dismissOnOverlayClick:{value:!1},dismissOnActionClick:{value:!0},title:{value:""},htmlTitle:{value:""},navBarView:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},width:{value:0},minWidth:{value:0},height:{value:0},fullWindow:{value:!1},subview:{value:null},classList:{value:""},buttonFlavorText:{value:""},showButtonFlavorText:{value:!0},showHeader:{value:!0},showFooter:{value:!0},noScroll:{value:!1},maxHeight:{value:!0},modalSelector:{value:".modal"},modalOverlayType:{value:e.OverlayManager.ModalOverlay}}})},"@VERSION@",{requires:["flickr-view","fluid-css","hermes-template-fluid-modal","fluid-overlay-manager-view","flog"],optionalRequires:["fluid"],langBundles:["common"]});
YUI.add("hermes-template-explore-big-scotch-modal",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+="<p>",a={hash:{intlName:"explore.BIG_SCOTCH_REASON_MESSAGE"},data:i},s+=l((o=n.godMessage||t.godMessage,o?o.call(t,a):f.call(t,"godMessage",a)))+'</p>\n<div class="dropdown-link exclude-reason-menu"><p class="tertiary">',(u=n.selectedExcludeReason)?u=u.call(t,{hash:{},data:i}):(u=t.selectedExcludeReason,u=typeof u===c?u.apply(t):u),s+=l(u)+'</p><span class="dropdown-arrow"></span></div>\n<input type="text" id="comment-field" name="comment" placeholder="',a={hash:{intlName:"explore.COMMENT"},data:i},s+=l((o=n.godMessage||t.godMessage,o?o.call(t,a):f.call(t,"godMessage",a)))+'" />\n',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/explore-big-scotch-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("explore-big-scotch-modal-view",function(e){var t=[];e.config.flickr&&e.config.flickr.god&&e.config.flickr.god.explore&&e.config.flickr.god.explore.scotch&&e.config.flickr.god.explore.scotch.types&&(t=e.config.flickr.god.explore.scotch.types),e.namespace("Views")[this.name]=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(n){var r,i;this.excludeReasons=[];for(i=0;i<t.length;i++)r=t[i],this.excludeReasons.push(e.merge(r,{text:this.godMessage({intlName:r.intlName})}));return this.set("selectedBigScotchTypeText",this.godMessage({intlName:"explore.PICK_A_REASON"})),this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerHTML(this.templates("explore-big-scotch-modal")({selectedExcludeReason:this.get("selectedBigScotchTypeText")})),this},activate:function(){return this.registerEventHandler(this.get("container").one(".exclude-reason-menu").on("click",this.handleExcludeReasonMenuClick.bind(this))),this.registerEventHandler(this.get("container").one("#comment-field").on("valuechange",this.handleCommentValueChange.bind(this))),this},handleExcludeReasonMenuClick:function(t){var n=this;t.halt(),this.dropdown=new e.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,anchorOffsetHorizontal:11,observePageResize:!0,anchorElement:t.target.one(".dropdown-arrow"),positionFixed:!0,preferBottom:!0,classList:"over-modal",overlayClassList:"over-modal",menuItems:this.excludeReasons}),this.dropdown.show(),this.registerEventHandler(this.dropdown.on("selected",function(t){t&&t.menuItem&&t.menuItem.value!==n.get("selectedBigScotchTypeValue")&&(n.set("selectedBigScotchTypeValue",t.menuItem.value),n.set("selectedBigScotchTypeText",t.menuItem.text),n.set("needComment",!!t.menuItem.requiresComment),n.get("container").one(".exclude-reason-menu p").set("text",n.get("selectedBigScotchTypeText")),!t.menuItem.requiresComment||n.get("excludeComment")?e.fire("exploreBigScotch:justificationComplete"):e.fire("exploreBigScotch:justificationIncomplete")),n.dropdown.close()}))},handleCommentValueChange:function(t){var n=this.get("container").one("#comment-field").get("value");this.set("excludeComment",n),this.get("needComment")&&!n?e.fire("exploreBigScotch:justificationIncomplete"):n&&this.get("selectedBigScotchTypeValue")&&e.fire("exploreBigScotch:justificationComplete")}})},"@VERSION@",{requires:["flickr-view","flickr-promise","fluid-droparound-view","hermes-template-explore-big-scotch-modal","explore-big-scotch-modal-css"],langBundles:[]});
YUI.add("hermes-template-fluid-subnav",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i;r+="\n			",i=n.unless.call(e,e.disabled,{hash:{},inverse:f.noop,fn:f.program(2,h,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function h(e,t){var r="",i;r+='\n			<li id="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===u?i.apply(e):i),r+=a(i)+'" class="link ',i=n["if"].call(e,e.selected,{hash:{},inverse:f.noop,fn:f.program(3,p,t),data:t});if(i||i===0)r+=i;return r+='"><a href="',(i=n.href)?i=i.call(e,{hash:{},data:t}):(i=e.href,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===u?i.apply(e):i),r+=a(i)+"</a></li>\n			",r}function p(e,t){return"selected"}function d(e,t){var r="",i,s;return r+='\n				<li class="link more-link">',s={hash:{intlName:"filter-bar.MORE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+"<span></span></li>\n			",r}function v(e,t){var r="",i,s;return r+='\n			<div class="more-link">',s={hash:{intlName:"filter-bar.MORE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+"<span></span></div>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;s+='<div class="fluid-subnav-shim">\n<div class="fluid-subnav">\n	<div class="subnav-content fluid-centered">\n		<ul class="links">\n		',o=n.each.call(t,t.links,{hash:{},inverse:f.noop,fn:f.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\n\n			",o=n.unless.call(t,t.hideMoreLinks,{hash:{},inverse:f.noop,fn:f.program(5,d,i),data:i});if(o||o===0)s+=o;s+="\n		</ul>\n\n		",o=n.unless.call(t,t.hideMoreLinks,{hash:{},inverse:f.noop,fn:f.program(7,v,i),data:i});if(o||o===0)s+=o;return s+='\n\n		<div class="fader"><span></span></div>\n	</div>\n</div>\n</div>\n',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-subnav",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("animation-manager",function(e){e.AnimationManager=function(){function i(){return n=!1,r=[],!YUI.Env.isServer&&!e.config.win.requestAnimationFrame&&s(),{subscribe:u}}function s(){var t=["webkit","moz"],n,r,i=0;for(r=0;r<t.length&&!e.config.win.requestAnimationFrame;++r)n=t[r],e.config.win.requestAnimationFrame=e.config.win[n+"RequestAnimationFrame"],e.config.win.cancelAnimationFrame=e.config.win[n+"CancelAnimationFrame"]||e.config.win[n+"CancelRequestAnimationFrame"];if(!e.config.win.requestAnimationFrame||!e.config.win.cancelAnimationFrame)e.config.win.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(i+16,t);return setTimeout(function(){e(i=n)},n-t)},e.config.win.cancelAnimationFrame=clearTimeout}function o(){if(!n)return;r.forEach(function(e,t){e()}),e.config.win.requestAnimationFrame(o)}function u(t){return r.push(t),n||(n=!0,e.config.win.requestAnimationFrame(o)),{detach:function(){r.splice(r.indexOf(t),1),r.length||(n=!1)}}}var t,n,r;return t||(t=i()),t}()},"@VERSION@",{requires:[]});
YUI.add("fluid-subnav-view",function(e){"use strict";var t,n,r=50;t={css:{subnav:".fluid-subnav",subnavContent:".subnav-content",links:".subnav-content .links",tools:".subnav-content .tools",link:".link",altMoreLinks:"li.more-link",moreLinks:"div.more-link"},options:{}},n={isFixed:!1},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid?e.nsid:this.appContext.getViewer().nsid,e.subnavConfig&&(e.subnavConfig.selected&&this.set("selected",e.subnavConfig.selected),e.subnavConfig.links&&this.set("links",e.subnavConfig.links),e.subnavConfig.moreLinks&&this.set("moreLinks",e.subnavConfig.moreLinks)),this},loadState:function(t){var n=this;return t=t||[],t.push(this.appContext.getModel("person-models",this.nsid).then(function(e){n.set("personModel",e),n.get("links")||n.populateUrls(e)})),e.Promise.all(t)},buildContainer:function(){var e={links:this.get("links"),hideMoreLinks:this.get("moreLinks")===undefined};return this.setContainerHTML(this.templates("fluid-subnav")(e)),this},activate:function(){return this.subnavElement=this.get("container").one(t.css.subnav),this.set("floatThreshold",this.get("container").get("offsetTop")-r),this.get("floatOnScroll")&&(this.registerEventHandler(e.globalEvents.subscribe("window:scroll:nothrottle",this.toggleFixedSubnav.bind(this))),this.toggleFixedSubnav()),this.get("moreLinks")!==undefined&&(this.registerEventHandler(this.get("container").one(t.css.moreLinks).on("click",this.toggleMoreLinks.bind(this))),this.registerEventHandler(this.get("container").one(t.css.altMoreLinks).on("click",this.toggleMoreLinks.bind(this)))),this.scrollToSelected(),this},scrollToSelected:function(){var n=this.get("container").one(t.css.links),r=this.get("container").one(t.css.link+".selected"),i=Date.now(),s=400,o=this;n&&(n=n.getDOMNode()),r&&(r=r.getDOMNode().offsetLeft||0),this.animate=e.AnimationManager.subscribe(function(){var e=Date.now(),t=(e-i)/s;t>1&&(t=1),n.scrollLeft=t*r,t>=1&&o.animate.detach()})},populateUrls:function(e){this.set("links",[]),this.set("moreLinks",[])},getShareView:function(){return},toggleMoreLinks:function(t){t.halt(),this.dialog=new e.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,observePageResize:!0,anchorElement:t.target.one("span"),minVerticalSpace:250,positionFixed:!0,anchorOffsetHorizontal:11,menuItems:this.get("moreLinks")}),this.dialog.show()},toggleFixedSubnav:function(){var t=e.config.win.scrollY||e.config.win.pageYOffset;t>this.get("floatThreshold")&&!n.isFixed?(this.subnavElement.addClass("fixed"),n.isFixed=!0):t<this.get("floatThreshold")&&n.isFixed&&(this.subnavElement.removeClass("fixed"),n.isFixed=!1),this.dialog&&this.dialog.isActiveAndInDOM()&&this.dialog.anchorPositionChange()}},{ATTRS:{floatOnScroll:{value:!0},floatThreshold:{value:250}}})},"@VERSION@",{requires:["flickr-view","fluid-css","hermes-template-fluid-subnav","fluid-droparound-view","url-helper","animation-manager"],optionalRequires:["fluid"],langBundles:["filter-bar","header","common","cameraroll"]});
YUI.add("hermes-lang-filter-bar",function(e,t){e.Intl.add("hermes/filter-bar","en-US",{EVERYONE:["Everyone's Photos"],YOUR_PHOTOS:["Your Photos"],CONTACTS_PHOTOS:["Your Contacts' Photos"],USER_PHOTOS:["${name}","'s Photos"],GROUP_PHOTOS:["Photos in ","${name}"],PEOPLE:["People"],GROUPS:["Groups"],USER_PHOTOS_IN_GROUP:["${name}","'s Photos in ","${group}"],YOUR_PHOTOS_IN_GROUP:["Your Photos in ","${group}"],CONTACTS_PHOTOS_IN_GROUP:["Your Contacts' Photos in ","${group}"],YOUR_FAVORITES:["Your Favorites"],MORE:["More"],LESS:["Less"],PHOTOS_VIDEOS:["Photos & Videos"],ONLY_PHOTOS:["Only Photos"],ONLY_VIDEOS:["Only Videos"],ALL_TIME:["All Time"],DATE_TAKEN:["Date Taken"],DATE_POSTED:["Date Posted"],DATE_UPLOADED:["Date Uploaded"],FROM:["From"],TO:["To"],MONTH_CHARS:["mm"],DAY_CHARS:["dd"],YEAR_CHARS:["yyyy"],DATE_INVALID:["Date invalid"],DONE:["Done"],DATE:["Date"],LICENSE:["License"],ANY_LICENSE:["Any License"],CC_LICENSE:["Creative Commons only"],CC_LICENSE_PARENT:["Creative Commons"],COMM_LICENSE:["Commercial use allowed"],DERIV_LICENSE:["Modifications allowed"],SS_ON:["SafeSearch on"],ON:["On"],SS_MOD:["SafeSearch moderate"],MOD:["Moderate"],SS_OFF:["SafeSearch off"],OFF:["Off"],RELEVANT:["Relevant"],RECENT:["Recent"],INTERESTING:["Interesting"],SORT_BY:["Sort"],SEARCH_IN:["Search"],ADVANCED_SEARCH:["Advanced Search"],PUBLIC:["Public view"],FRIEND:["Friend view"],FAMILY:["Family view"],FRIEND_AND_FAMILY:["Friend & family view"],VIEW_ALL:["View all"],FILTER_MODAL_TITLE:["New ways to view your Photostream!"],FILTER_MODAL_CONTENT_FILTER:["Easily see all your photos in Photostream with <b>View all</b>, or see your Photostream the way others see it with <b>Public</b>, <b>Friend</b> and <b>Family</b> views."],FILTER_MODAL_CONTENT_SORT:["Sort by <b>Date uploaded</b> or <b>Date taken</b>."],FILTER_MODAL_PIN:["Don't worry, we'll remember the views you select."],FILTER_MODAL_GROUCHY:['Don\'t like it? <a target="_blank" href="https://www.flickr.com/help/forum/en-us/72157652044178359/#reply72157652064734118">Complain about it.</a>'],FILTER_MODAL_FEEDBACK:['Don\'t like it? <a target="_blank" href="https://www.flickr.com/help/forum/en-us/72157652044178359/#reply72157652064734118">Let us know.</a>']})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-lang-header",function(e,t){e.Intl.add("hermes/header","en-US",{EDIT_COVER_PHOTO:["Edit cover photo"],PHOTOSTREAM:["Photostream"],ALBUMS:["Albums"],FAVORITES:["Favorites"],CREATIONS:["Creations"],PHOTO_BOOKS:["Photo Books"],EDIT:["Edit"],PUBLIC:["Public"],ALL:["All"],CHANGE_YOUR_BUDDY_ICON:["Change your Buddy Icon"],CHANGE_YOUR_GROUP_ICON:["Change your group icon"],MEMBER_SINCE:["Member Since"],GROUP_SINCE:["Group Since"],MDY_DATE:[{type:"date",valueName:"mdyDate",format:"medium"}],PHOTOS:["Photos"],VIEWS:["Views"],VIEW_ALL_ALBUMS:["View all albums"],SEND_FLICKR_MAIL:["Send FlickrMail"],BLOCK:["Block"],USERS_GOD_PAGE:["User's God Page"],GROUP_GOD_PAGE:["God"],ADMINISTRATION:["Administration"],DISCUSSIONS:["Discussions"],MEMBERS:["Members"],MAP:["Map"],ABOUT:["About"],INVITE:["Invite Friends"],OVERVIEW:["Overview"],FULLSCREEN:["Fullscreen"],SHARE_THIS_PAGE:["Share this page"],COMMENT:["Comment"],MORE_ACTIONS:["More actions"],THUMBNAIL_VIEW:["Thumbnail view"],GROUP_LIST:["Group List"],CREATE_GROUP:["Create Group"],COVER_PHOTO_CHOOSE:["Choose Cover Photo"],COVER_PHOTO_UPLOAD:["Upload a photo"],COVER_PHOTO_SET_POSITION:["Drag to set position!"],COVER_PHOTO_SAVE:["Save"],COVER_PHOTO_CANCEL:["Cancel"],COVER_PHOTO_LIST_ERROR:["We're having some trouble listing your photos. Try again in a few seconds."],COVER_PHOTO_SELECT_ERROR:["We're having some trouble selecting that photo. Try again in a few seconds."],COVER_PHOTO_POSITION_ERROR:["We're having some trouble positioning that photo. Try again in a few seconds."],COVER_PHOTO_LOW_RESOLUTION:["This photo is small and may not look great as a coverphoto."],COVER_PHOTO_NO_PHOTOS:["Uh oh! No photos here.<br/>What? Do we have to take them for you, too?"],GROUPS_HEADER:["Your Groups"],GROUP_JOIN:["Join Group"],GROUP_JOINED:["Joined"],GROUP_JOIN_REQUESTED:["Join Requested"],GROUP_LEAVE_GROUP:["Leave Group"],GROUPS_OPT_OUT_MESSAGE:["You are viewing the beta version of our new groups experience. Click here to return to the old version."],GROUPS_OPT_IN_MESSAGE:["Go back to the beta groups experience."],STEAMPUNK_OCTOPUS:["Steampunk Octopus"],FOLLOWERS:[{type:"plural",valueName:"count",options:{one:"${#} Follower",other:"${#} Followers"}}],FOLLOWING:[{type:"plural",valueName:"count",options:{one:"${#} Following",other:"${#} Following"}}],FOLLOWERS_SIMPLE:["Followers"],FOLLOWING_SIMPLE:["Following"],JOINED_YEAR:["Joined ","${year}"],COUNT_PHOTOS:[{type:"plural",valueName:"count",options:{one:"${#} Photo",other:"${#} Photos"}}],GUESTPASS_HISTORY:["Sharing history"],POSITION_IMAGE:["Position your image"],MIN_ZOOM:["You can't zoom out anymore for this image"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-lang-cameraroll",function(e,t){e.Intl.add("hermes/cameraroll","en-US",{CAMERA_ROLL:["Camera Roll"],PRIVACY_ERROR:["An error occurred while trying to change the Privacy of the photos. Please try again."],CIRCA:["Circa"],CIRCA_SOMETIME:["Circa / Sometime"],CIRCA_SOMETIME_YEAR:["Circa / Sometime in ","${year}"],CIRCA_YEAR:["Circa ","${year}"],SOMETIME_IN_MONTH:["Sometime in ",{type:"date",valueName:"date",format:"monthYear"}],DELETE_PHOTOS:[{type:"plural",valueName:"selectedCount",options:{one:"Delete ${#} photo?",other:"Delete ${#} photos?"}}],DELETE_MESSAGE:["You cannot reverse this action. ",{type:"plural",valueName:"selectedCount",options:{one:"Are you sure you want to permanently delete this photo?",other:"Are you sure you want to permanently delete all these photos?"}}],DELETE_ERROR:["An error has occurred deleting your selected photos. Please try again."],REMOVE_FROM_SELECTION:["Remove from selection"],EDIT_PHOTOS:[{type:"plural",valueName:"selectedCount",options:{one:"Editing ${#} photo",other:"Editing ${#} photos"}}],GO_TO_PHOTOPAGE:["Go to photo page"],CHANGE_PRIVACY_PHOTOS_PUBLIC:[{type:"plural",valueName:"count",options:{one:"Make ${#} photo public?",other:"Make ${#} photos public?"}}],CHANGE_PRIVACY_MESSAGE_PUBLIC:[{type:"plural",valueName:"count",options:{one:"Are you sure you want to make this photo public?",other:"Are you sure you want to make these photos public?"}}],CHANGE_PRIVACY_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Change privacy of ${#} photo?",other:"Change privacy of ${#} photos?"}}],CHANGE_PRIVACY_MESSAGE:[{type:"plural",valueName:"count",options:{one:"Are you sure you want to change the privacy of this photo?",other:"Are you sure you want to change the privacy of these photos?"}}],ERROR_TITLE_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the Title/Description of one photo.",other:"Unable to update the Title/Description of ${#} photos."}}],ERROR_SAFETY_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the safety level of one photo.",other:"Unable to update the safety level of ${#} photos."}}],ERROR_LICENSE_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the license of one photo.",other:"Unable to update the license of ${#} photos."}}],ERROR_PERMISSIONS_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the permissions of one photo.",other:"Unable to update the permissions of ${#} photos."}}],ERROR_DATES_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the dates of one photo.",other:"Unable to update the dates of ${#} photos."}}],ERROR_TAGS_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the tags of one photo.",other:"Unable to update the tags of ${#} photos."}}],ERROR_PEOPLE_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to update the people in one photo.",other:"Unable to update the people in ${#} photos."}}],CONSOLIDATED_ERROR_MESSAGE:["The following errors occurred while processing your selected photos:"],MAX_TAGS_REACHED:["Maximum number of tags added."],MAX_PEOPLE_REACHED:["Maximum number of people added."],UNABLE_TO_ADD_USERS_TO_PHOTO:[{type:"plural",valueName:"count",options:{one:"${#} person could not be added to certain photos as they were either already present, or did not want to be identified in those photos.",other:"${#} people could not be added to certain photos as they were either already present, or did not want to be identified in those photos."}}],UNABLE_TO_ADD_TAGS_TO_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Unable to add these tags to the photo as this would exceed the maximum number of tags possible on the photo.",other:"Unable to add these tags to ${#} photos as this would exceed the maximum number of tags possible on those photos."}}],UNABLE_TO_ADD_USERS_TO_ALL_PHOTOS:[{type:"plural",valueName:"count",options:{one:"${#} person could not be added to all the selected photos.",other:"${#} people could not be added to all the selected photos."}}],UNABLE_TO_ADD_PHOTOS_TO_ALL_USERS:[{type:"plural",valueName:"count",options:{one:"Unable to add people to one photo.",other:"Unable to add people to ${#} photos."}}],CONTACT_LIST_ERROR:["Unable to fetch your contact list."],DATE_POSTED_GREATER_THAN_FLICKR_JOIN:["Posted date must be after you joined Flickr."],DATE_UPLOADED_GREATER_THAN_FLICKR_JOIN:["Uploaded date must be after you joined Flickr."],TITLE_PLACEHOLDER:[{type:"plural",valueName:"selectedCount",options:{one:"Change title",other:"Change all titles"}}],DESCRIPTION_PLACEHOLDER:[{type:"plural",valueName:"selectedCount",options:{one:"Change description",other:"Change all descriptions"}}],EDIT_PRIVACY_LABEL:[{type:"plural",valueName:"selectedCount",options:{one:"Who can see this photo",other:"Who can see these photos"}}],EDIT_COMMENTING_PERMISSION_LABEL:[{type:"plural",valueName:"selectedCount",options:{one:"Who can comment on this photo",other:"Who can comment on these photos"}}],EDIT_TAGGING_PERMISSION_LABEL:[{type:"plural",valueName:"selectedCount",options:{one:"Who can add tags and people to this photo",other:"Who can add tags and people to these photos"}}],EDIT_SAFETY_LABEL:[{type:"plural",valueName:"selectedCount",options:{one:"How safe is this photo for public search",other:"How safe are these photos for public search"}}],EDIT_COPYRIGHT_LABEL:[{type:"plural",valueName:"selectedCount",options:{one:"Copyright protection level for this photo",other:"Copyright protection level for these photos"}}],UNKNOWN:["Unknown"],DELETE_ERROR_TITLE:["Oh no!"],DELETE_ERROR_PHOTO_MISSING:["We couldn\u2019t delete all of these photos because it looks like some of them aren\u2019t accessible anymore."],DELETE_ERROR_SIGNED_OUT:['We couldn\u2019t delete these photos because it looks like you\u2019re no longer signed in. <a href="/signin/?redir=/cameraroll/">Click here to sign in and try again</a>.'],DELETE_ERROR_UNKNOWN:['We couldn\u2019t delete these photos because an unexpected error occurred. <a href="/cameraroll/">Click here to reload and try again</a>.'
],NODATE:["No date"],YOU_HAVE_1000GB_OF_FREE_SPACE:["You have 1000GB of space."],UPLOAD_STRAIGHT_FROM_DESKTOP_WITH_UPLOADER:["Upload photos straight from your desktop."],DOWNLOAD_FLICKR_UPLOADR:["Download Flickr Uploadr"],DATE_TAKEN:["Date taken"],DATE_POSTED:["Date posted"],DATE_UPLOADED:["Date uploaded"],TOO_MANY_EDITS:["You may only edit data for ","${count}"," photos at a time."],ADD_TO_ALBUMS_PLURAL:[{type:"plural",valueName:"count",options:{one:"Add this photo to an album",other:"Add these photos to an album"}}],NEW_USER_PRO_INTRO:["A new way to browse, edit, and organize your photos.  Powered by unlimited storage and really smart Flickrbots. Many more features to come!"],NEW_USER_NONPRO_INTRO:["A new way to browse, edit, and organize your photos.  Powered by 1000 GB of free storage and really smart Flickrbots. Many more features to come!"],NEW_USER_JUMP:["Jump through years of photos with the timeline"],NEW_USER_EDIT:["Easily edit, create albums, and manage photos"],NEW_PHOTOS_UPLOADED:[{type:"plural",valueName:"count",options:{one:"${#} new photo has been uploaded",other:"${#} new photos have been uploaded"}}],NEW_PHOTOS_CATEGORIZED:[{type:"plural",valueName:"count",options:{one:"${#} new photo has been categorized",other:"${#} new tagged photos have been categorized"}}],NEW_USER_WELCOME_TITLE:["Welcome to Camera Roll!"],REFRESH:["Refresh"],NEW_USER_VIEW:["View photos by date taken or uploaded"],CAMERAROLL_BETA:["Beta"],PROVIDE_FEEDBACK:["Provide feedback on the new Camera Roll"],BUILDING_MAP:["Hey there, we're building your massive library, this might take a sec..."],SOFTWARE_DOWNLOAD:["Software download"],DOWNLOAD_TOS_COPY:["By downloading this software, you consent to its installation and the automatic installation of future updates, and you agree that you are subject to the Yahoo terms and Privacy Policy. You can uninstall this software at any time."],EMPTY_STATE_MESSAGE_NONPRO:["Upload to begin a new way to browse, edit, and organize your photos.  Powered by 1000 GB of free storage and really smart Flickrbots. Many more features to come!"],EMPTY_STATE_MESSAGE_PRO:["Upload to begin a new way to browse, edit, and organize your photos.  Powered by unlimited storage and really smart Flickrbots. Many more features to come!"],WELCOME_TO_CAMERAROLL:["Welcome to Camera Roll"],ALMOST:["(Almost...)"],NOT_ELIGIBLE:["Currently you are not eligible for the BETA test but we are working hard to get this great experience to every Flickr user very soon! Stay tuned!"],MODERN_DESKTOP_BROWSERS:["You qualify to experience this new way to browse, edit and organize your photos. However, you can only experience this exciting new feature on <strong>modern desktop browsers</strong>... for now ;)"],GO_TO_PHOTOSTREAM:["Go to Photostream"],CHANGES_APPLIED_TO_PHOTOS:["Changes have been applied to ",{type:"plural",valueName:"count",options:{one:"${#} photo",other:"${#} photos"}}],SHOW_INFO:["Show info"],FEEDBACK:["Feedback"],MULTIPLE_SELECT_VALUE:["Multiple"],GET_FLICKR_UPLOADR_FOR_MAC:["Get the Flickr Uploadr for Mac"],GET_FLICKR_UPLOADR_FOR_WINDOWS:["Get the Flickr Uploadr for Windows"],UPLOAD_THOUSANDS_OF_PHOTOS:["Upload thousands of photos at once"],INSTALL_NOW:["Install Now"],SMALL_BANNER_INSTALL:["Install Uploadr"],SMALL_BANNER_CTA:["Upload 1000s of photos fast"],SELECT_ALL:["Select all"],DATE_TITLE:[{type:"date",valueName:"intlDate",format:"long"}],MONTH:[{type:"date",valueName:"intlDate",format:"month"}],YEAR:[{type:"date",valueName:"intlDate",format:"year"}],PRIVACY:["Privacy"],EDIT:["Edit"],DELETE:["Delete"],CLEAR_SELECTION:["Clear selection"],ADD_NEW_TAGS:["Add new tags"],AUTOTAGS:["Autotags"],CAMERAROLL_SHARING_WARNING:["Careful! The private photos in this selection will be visible to anyone who has the share link. Is that really what you want?"],DO_NOT_REMIND_SHARING:["Don't remind me again"],DOWNLOAD_GENERIC_ERROR:["There was an error downloading this selection. Please try again."],TOO_MANY_SHARES:["You may only share ","${count}"," photos at a time."],PREPARING_DOWNLOAD:["Preparing download"],DOWNLOAD_NOT_AVAILABLE_ERROR:["There are no photos or videos available in this selection for you to download."],DOWNLOAD_DISABLED_ERROR:["Bulk downloading is currently unavailable. Please try again in a minute."],TOO_MANY_DOWNLOADS:["You may only download ","${count}"," photos at a time."],NO_AUTOTAGS_YET_UPLOAD_MORE:['It looks like our friendly robots haven\u2019t spotted anything to <a href="https://help.yahoo.com/kb/flickr/tag-keywords-flickr-sln7455.html?soc_src=mail&soc_trk=ma">tag</a> in your photos just yet. <a href="https://www.flickr.com/upload">Why not upload some more?</a>'],NO_AUTOTAGS_YET:['It looks like our friendly robots haven\u2019t spotted anything to <a href="https://help.yahoo.com/kb/flickr/tag-keywords-flickr-sln7455.html?soc_src=mail&soc_trk=ma">tag</a> in your photos just yet.'],UPLOAD_MORE:["Why not upload some more?"],MAGIC_VIEW:["Magic view"],INSTALL_FLICKR_UPLOADER_FOR_MAC:["Install Flickr Uploadr to quickly and safely backup your entire photo collection."],MAGIC_VIEW_TITLE_CASE:["Magic View"],SUBJECT_VIEW:["Subject view"],SUBJECT_VIEW_TITLE_CASE:["Subject View"],ALPHA_WARNING_TITLE:["Magic View Alpha: <em>Confidential</em>"],ALPHA_WARNING_BODY:["Shh, it\u2019s a secret! Remember, you need to keep the new features and design you see in this alpha group secret. You can't tell your friends, post to your blog or even tweet about them before we launch for the rest of the Flickr community."],ALPHA_WARNING_BUTTON:["Mum's the word, got it!"],ERROR_SIGNED_OUT:['It looks like you\u2019re no longer signed in. <a href="/signin/?redir=/cameraroll/">Click here to sign in and try again</a>.'],ERROR_BEFORE_EDITING_OUT:["Something went wrong while preparing your photos to be edited.  Please try again."],SELECT_PHOTO:["Select photo"],VIEW_ON_PHOTO_PAGE:["View on photo page"]})},"@VERSION@",{requires:["intl"]});
YUI.add("fluid-explore-subnav-view",function(e){"use strict";e.FlickrView.create(this.name,e.namespace("Views")["fluid-subnav-view"],[],{langBundles:this.details.langBundles,initializer:function(e){return this.appStateParams=e,this.constructor.superclass.initializer.call(this,e)},loadState:function(){return this.populateUrls(),e.Promise.resolve()},populateUrls:function(t){var n=this,r;this.set("links",[{name:this.intlMessage({intlName:"common.EXPLORE"}),id:"explore",href:e.url("/explore")},{name:this.intlMessage({intlName:"common.TRENDING"}),id:"tags",href:e.url("/tags")}]);var i=[{text:this.intlMessage({intlName:"global-nav.THE_COMMONS"}),href:e.url("/commons")},{text:"20under20",href:e.url("/20under20")},{text:this.intlMessage({intlName:"global-nav.GALLERIES"}),href:e.url("/galleries")},{text:this.intlMessage({intlName:"global-nav.WORLD_MAP"}),href:e.url("/map")},{text:this.intlMessage({intlName:"global-nav.APP_GARDEN"}),href:e.url("/services")},{text:this.intlMessage({intlName:"global-nav.CAMERA_FINDER"}),href:e.url("/cameras")}];this.appContext.lang==="en-US"&&i.push({text:this.intlMessage({intlName:"global-nav.THE_WEEKLY_FLICKR"}),href:"/photos/flickr/albums/72157639868074114/"}),i.push({text:this.intlMessage({intlName:"global-nav.FLICKR_BLOG"}),href:"https://blog.flickr.net/"}),this.set("moreLinks",i),this.get("selected")&&(r=this.get("links").filter(function(e){return e.id===n.get("selected")}),r[0].selected=!0)}})},"@VERSION@",{requires:["flickr-view","fluid-subnav-view","url-helper"],langBundles:["explore","global-nav","common"]});
